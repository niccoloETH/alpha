<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpha Score Rolling Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@400;500;600;700;800&display=swap"
      rel="stylesheet" />
    <!-- Lucid Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      :root {
        /* Light Mode Palette */
        --bg-light: #ffffff; /* Updated background to white */
        --text-light: #000000;
        --card-bg-light: #ffffff;
        --border-color: #000000;
        --shadow-color: #000000;
        --button-primary-bg-light: #2563eb;
        --button-primary-text-light: #ffffff;
        --button-primary-hover-bg-light: #1d4ed8;
        --button-toggle-bg-light: #ffffff;
        --button-toggle-text-light: #000000;
        --button-toggle-icon-light: #000000;
        --summary-card-bg-light: #facc15;
        --summary-card-text-light: #000000;
        --table-header-bg-light: #34d399;
        --table-header-text-light: #000000;
        --table-even-row-bg-light: #f3f4f6;
        --table-odd-row-bg-light: #ffffff;
        --table-data-text-light: var(--text-light);
        --error-text-light: #9f1239;
        --error-bg-light: #fecdd3;
        --grid-line-color-light: rgba(229,231,235,0.8); /* From user request */
        --marquee-bg-light: linear-gradient(90deg, #c4b5fd, #93c5fd);
        --marquee-text-light: #ffffff;
        --disclaimer-text-light: #4b5563;
        --token-swap-section-bg-light: #f9fafb;
        --badge-bg-light: #fef3c7; /* amber-100 */
        --badge-text-light: #92400e; /* amber-800 */
        --wallet-badge-bg-light: #dbeafe; /* blue-100 */
        --wallet-badge-text-light: #1e40af; /* blue-800 */
        --guide-list-marker-light: #2563eb; /* blue-600 for list markers */
        --token-swap-info-text-light: #374151; /* gray-700 */
        --calc-result-strong-light: #1d4ed8; /* blue-700 */
        --bnb-bonus-text-light: #059669; /* green-600 */
        --card-header-hover-bg-light: #f3f4f6; /* For card header hover */
        --input-readonly-bg-light: #e5e7eb; /* gray-200 */

        /* Dark Mode Palette */
        --bg-dark: #111827;
        --text-dark: #f3f4f6;
        --card-bg-dark: #1f2937;
        --button-primary-bg-dark: #2563eb;
        --button-primary-text-dark: #ffffff;
        --button-primary-hover-bg-dark: #1d4ed8;
        --button-toggle-bg-dark: #374151;
        --button-toggle-text-dark: #f3f4f6;
        --button-toggle-icon-dark: #ffffff;
        --summary-card-bg-dark: #facc15;
        --summary-card-text-dark: var(--text-dark); /* Changed from #000000 */
        --table-header-bg-dark: #34d399;
        --table-header-text-dark: #000000;
        --table-even-row-bg-dark: #374151;
        --table-odd-row-bg-dark: #1f2937;
        --table-data-text-dark: #ffffff;
        --error-text-dark: #9f1239;
        --error-bg-dark: #fecdd3;
        --grid-line-color-dark: rgba(255, 255, 255, 0.05);
        --marquee-bg-dark: linear-gradient(90deg, #8b5cf6, #3b82f6);
        --marquee-text-dark: #ffffff;
        --disclaimer-text-dark: #9ca3af;
        --token-swap-section-bg-dark: #374151;
        --badge-bg-dark: #b45309; /* amber-700 */
        --badge-text-dark: #fef3c7; /* amber-100 */
        --wallet-badge-bg-dark: #1e3a8a; /* blue-800 */
        --wallet-badge-text-dark: #bfdbfe; /* blue-200 */
        --guide-list-marker-dark: #60a5fa; /* blue-400 for list markers */
        --token-swap-info-text-dark: #d1d5db; /* gray-300 */
        --calc-result-strong-dark: #60a5fa; /* blue-400 */
        --bnb-bonus-text-dark: #34d399; /* green-400 */
        --card-header-hover-bg-dark: #374151; /* For card header hover */
        --input-readonly-bg-dark: #374151; /* gray-700 for dark mode */
      }

      html,
      body {
        height: 100%;
      }

      body {
        font-family: "Poppins", "Kantumruy Pro", sans-serif;
        background-color: var(--bg-light);
        color: var(--text-light);
        transition: background-color 0.3s, color 0.3s;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background-image: linear-gradient(to right, var(--grid-line-color-light) 1px, transparent 1px),
                          linear-gradient(to bottom, var(--grid-line-color-light) 1px, transparent 1px),
                          radial-gradient(circle 500px at 20% 80%, rgba(139,92,246,0.3), transparent),
                          radial-gradient(circle 500px at 80% 20%, rgba(59,130,246,0.3), transparent);
        background-size: 48px 48px, 48px 48px, 100% 100%, 100% 100%;
        background-attachment: fixed;
      }
      body.dark-mode {
        background-color: var(--bg-dark);
        color: var(--text-dark);
        background-image: linear-gradient(to right, var(--grid-line-color-dark) 1px, transparent 1px),
                          linear-gradient(to bottom, var(--grid-line-color-dark) 1px, transparent 1px),
                          radial-gradient(circle 500px at 20% 80%, rgba(139,92,246,0.3), transparent),
                          radial-gradient(circle 500px at 80% 20%, rgba(59,130,246,0.3), transparent);
        background-size: 48px 48px, 48px 48px, 100% 100%, 100% 100%;
        background-attachment: fixed;
      }
      .main-container {
        width: 100%;
        max-width: 1280px;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
        flex-grow: 1;
        padding-bottom: 2rem;
      }
      @media (min-width: 640px) {
        .main-container {
          padding-left: 1.5rem;
          padding-right: 1.5rem;
        }
      }
      @media (min-width: 1024px) {
        .main-container {
          padding-left: 2rem;
          padding-right: 2rem;
        }
      }

      @keyframes border-shine {
        0% { background-position: 0% 0%; }
        100% { background-position: 100% 0%; }
      }
      
      .top-shine-bar {
        position: fixed;
        height: 4px;
        top: 0px;
        left: 0;
        width: 100%;
        background: linear-gradient(to right, rgb(67, 215, 100) 0%, rgb(255, 183, 44) 12%, rgb(255, 93, 0) 22%, rgb(236, 10, 10) 33%, rgb(180, 5, 183) 44%, rgb(128, 0, 255) 55%, rgb(40, 92, 255) 66%, rgb(67, 215, 100) 77%, rgb(255, 183, 44) 88%, rgb(255, 93, 0) 100%) 0% 0% / 300%;
        animation: 2s linear 0s infinite alternate none running border-shine;
        z-index: 9999;
      }

      .neobrutalist-marquee {
        background: var(--marquee-bg-light);
        color: var(--marquee-text-light);
        border: 3px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 6px 6px 0px var(--shadow-color);
        padding: 0.75rem 1rem;
        margin-bottom: 1.5rem;
        font-weight: 700;
        font-size: 1rem;
        overflow: hidden;
        transition: background-color 0.3s, color 0.3s;
        white-space: nowrap;
        position: relative;
      }

      body.dark-mode .neobrutalist-marquee {
        background: var(--marquee-bg-dark);
        color: var(--marquee-text-dark);
      }
      .neobrutalist-marquee .marquee-item {
        display: inline-flex;
        align-items: center;
        margin-right: 1.5rem;
        vertical-align: middle;
      }
      .neobrutalist-marquee .marquee-svg-item {
        width: 20px;
        height: 20px;
        margin: 0 0.45rem;
      }
      .neobrutalist-marquee .marquee-svg-item path {
        transition: fill 0.3s;
      }
      .neobrutalist-marquee
        .marquee-item
        .marquee-svg-item
        path[fill="currentColor"] {
        fill: var(--marquee-text-light);
      }
      body.dark-mode
        .neobrutalist-marquee
        .marquee-item
        .marquee-svg-item
        path[fill="currentColor"] {
        fill: var(--marquee-text-dark);
      }
      .neobrutalist-marquee
        .marquee-item
        .marquee-svg-item
        path[stroke="black"] {
        stroke: var(--border-color);
        fill: var(--marquee-text-light);
      }
      body.dark-mode
        .neobrutalist-marquee
        .marquee-item
        .marquee-svg-item
        path[stroke="black"] {
        fill: var(--marquee-text-dark);
      }

      .neobrutalist-card {
        background-color: var(--card-bg-light);
        border: 3px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 6px 6px 0px var(--shadow-color);
        padding: 0; /* Padding will be handled by header and content */
        margin-bottom: 1rem;
        transition: background-color 0.3s;
      }
      body.dark-mode .neobrutalist-card {
        background-color: var(--card-bg-dark);
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1rem; /* Tailwind p-3 equivalent for header */
        cursor: pointer;
        border-bottom: 2px solid transparent; /* For spacing, or actual border if content shown */
        transition: background-color 0.2s;
      }
      .neobrutalist-card:hover .card-header {
        /* Subtle hover for header */
        background-color: var(--card-header-hover-bg-light);
      }
      body.dark-mode .neobrutalist-card:hover .card-header {
        background-color: var(--card-header-hover-bg-dark);
      }
      .card-header h1,
      .card-header h2 {
        margin-bottom: 0 !important; /* Override existing margin for page-title/other titles */
      }

      .card-content {
        padding: 1rem; /* Inner padding for card content */
        border-top: 2px solid var(--grid-line-color-light); /* Separator line */
        transition: padding 0.3s ease-in-out, max-height 0.3s ease-in-out;
      }
      body.dark-mode .card-content {
        border-top-color: var(--grid-line-color-dark);
      }
      .card-content.hidden {
        display: none;
      }

      .input-label {
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        font-weight: 700;
        color: var(--text-light);
        transition: color 0.3s;
      }
      body.dark-mode .input-label {
        color: var(--text-dark);
      }

      .input-field {
        width: 100%;
        padding: 0.75rem;
        border: 3px solid var(--border-color);
        border-radius: 0.375rem;
        font-size: 1rem;
        background-color: var(--card-bg-light);
        font-weight: 500;
        color: var(--text-light);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
          background-color 0.3s, color 0.3s;
      }
      body.dark-mode .input-field {
        background-color: var(--bg-dark);
        color: var(--text-dark);
      }
      .input-field:focus {
        outline: none;
        box-shadow: 3px 3px 0px var(--shadow-color);
        transform: translate(-1px, -1px);
      }
      .input-field[readonly] {
        background-color: var(--input-readonly-bg-light);
        cursor: not-allowed;
        box-shadow: none;
        transform: none;
      }
      body.dark-mode .input-field[readonly] {
        background-color: var(--input-readonly-bg-dark);
      }

      .toggle-button {
        background-color: var(--button-toggle-bg-light);
        color: var(--button-toggle-text-light);
        font-weight: 700;
        height: 44px;
        padding: 0 0.75rem;
        border-radius: 0.375rem;
        border: 3px solid var(--border-color);
        box-shadow: 3px 3px 0px var(--shadow-color);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out, background-color 0.3s, color 0.3s;
        cursor: pointer;
        margin-left: 0.5rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        gap: 0.35rem;
      }
      
      .toggle-button.icon-only {
        width: 44px;
        padding: 0;
      }

      body.dark-mode .toggle-button {
        background-color: var(--button-toggle-bg-dark);
        color: var(--button-toggle-text-dark);
      }
      .toggle-button .lucide,
      .card-toggle-button .lucide {
        width: 24px;
        height: 24px;
        stroke: var(--button-toggle-icon-light);
        fill: none !important;
        transition: stroke 0.3s, transform 0.3s;
      }
      .toggle-button .binance-logo {
        width: 24px;
        height: 24px;
      }
      body.dark-mode .toggle-button .lucide,
      body.dark-mode .card-toggle-button .lucide {
        stroke: var(--button-toggle-icon-dark);
      }
      .card-toggle-button .lucide.rotate-180 {
        /* For chevron pointing up */
        transform: rotate(180deg);
      }

      #twitterButton svg path {
        fill: var(--button-toggle-icon-light);
        transition: fill 0.3s;
      }
      body.dark-mode #twitterButton svg path {
        fill: var(--button-toggle-icon-dark);
      }
      .toggle-button span {
        font-size: 0.75rem;
        line-height: 1.5;
        color: var(--button-toggle-text-light);
        transition: color 0.3s;
      }
      body.dark-mode .toggle-button span {
        color: var(--button-toggle-text-dark);
      }
      #twitterButton span {
        margin-left: 0.25rem;
      }

      .toggle-button:hover {
        transform: translate(-1px, -1px);
        box-shadow: 4px 4px 0px var(--shadow-color);
      }

      .simulate-button {
        /* Also used for Calculate Trades button */
        width: 100%;
        background-color: var(--button-primary-bg-light);
        color: var(--button-primary-text-light);
        font-weight: 800;
        padding: 0.875rem 0;
        border-radius: 0.375rem;
        border: 3px solid var(--border-color);
        font-size: 1.125rem;
        box-shadow: 4px 4px 0px var(--shadow-color);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
          background-color 0.3s, color 0.3s;
        cursor: pointer;
      }
      body.dark-mode .simulate-button {
        background-color: var(--button-primary-bg-dark);
        color: var(--button-primary-text-dark);
      }
      .simulate-button:hover {
        background-color: var(--button-primary-hover-bg-light);
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0px var(--shadow-color);
      }
      body.dark-mode .simulate-button:hover {
        background-color: var(--button-primary-hover-bg-dark);
      }
      .simulate-button:active {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0px var(--shadow-color);
      }

      .summary-card {
        /* This is a specific card, will apply general neobrutalist-card and then specific header/content */
        /* background-color already handled by neobrutalist-card and specific vars */
      }
      body.dark-mode .summary-card {
        /* background-color already handled by neobrutalist-card and specific vars */
      }
      .summary-text {
        /* This is the content of summary card */
        font-size: 1.125rem;
        font-weight: 700;
        text-align: center;
        color: var(
          --summary-card-text-light
        ); /* Ensure text color is applied */
      }
      body.dark-mode .summary-text {
        color: var(--summary-card-text-dark);
      }

      .results-table {
        width: 100%;
        /* margin-top: 1rem;  This margin will be part of card-content padding */
        border-collapse: collapse;
        font-size: 0.875rem;
        border: 3px solid var(--border-color);
      }
      .results-table th,
      .results-table td {
        border: 2px solid var(--border-color);
        padding: 0.5rem;
        text-align: left;
        transition: background-color 0.3s, color 0.3s;
      }
      .results-table th {
        background-color: var(--table-header-bg-light);
        color: var(--table-header-text-light);
        font-weight: 700;
        border-bottom-width: 3px;
      }
      body.dark-mode .results-table th {
        background-color: var(--table-header-bg-dark);
        color: var(--table-header-text-dark);
      }
      .results-table td {
        color: var(--table-data-text-light);
      }
      body.dark-mode .results-table td {
        color: var(--table-data-text-dark);
      }
      .results-table td.text-center {
        text-align: center;
      }
      .results-table tr:nth-child(even) td {
        background-color: var(--table-even-row-bg-light);
      }
      body.dark-mode .results-table tr:nth-child(even) td {
        background-color: var(--table-even-row-bg-dark);
      }
      .results-table tr:nth-child(odd) td {
        background-color: var(--table-odd-row-bg-light);
      }
      body.dark-mode .results-table tr:nth-child(odd) td {
        background-color: var(--table-odd-row-bg-dark);
      }

      .error-message-style {
        color: var(--error-text-light);
        background-color: var(--error-bg-light);
        border: 3px solid var(--border-color);
        padding: 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        text-align: center;
        font-weight: 600;
        box-shadow: 4px 4px 0px var(--shadow-color);
        transition: background-color 0.3s, color 0.3s;
      }
      body.dark-mode .error-message-style {
        color: var(--error-text-dark);
        background-color: var(--error-bg-dark);
      }

      .page-title {
        /* Used in Alpha Sim Card Header */
        font-size: 1.75rem;
        font-weight: 800;
        text-align: center;
        /* margin-bottom: 1.5rem; Removed, header handles spacing */
        color: var(--text-light);
        transition: color 0.3s;
      }
      body.dark-mode .page-title {
        color: var(--text-dark);
      }
      .controls-container {
        display: flex;
        justify-content: flex-end; /* UPDATED */
        align-items: center;
        margin-bottom: 1rem;
        flex-wrap: nowrap; /* UPDATED */
      }
      #alphaScoreSimulatorCard .card-header h1, /* Targeting specific h1 */
      #resultsCard .card-header h2, 
      #swapCard .card-header h2, 
      #guideCard .card-header h2, 
      #volumeCalcCard .card-header h2,
      #summaryCard .card-header h2 {
        /* Targeting title in summary card header */
        color: var(--text-light);
        transition: color 0.3s;
        flex-grow: 1; /* Allow title to take space */
      }
      body.dark-mode #alphaScoreSimulatorCard .card-header h1,
      body.dark-mode #resultsCard .card-header h2,
      body.dark-mode #swapCard .card-header h2,
      body.dark-mode #guideCard .card-header h2,
      body.dark-mode #volumeCalcCard .card-header h2,
      body.dark-mode #summaryCard .card-header h2 {
        color: var(--text-dark);
      }

      .disclaimer-text {
        font-size: 0.75rem;
        text-align: center;
        margin-top: 1.5rem;
        padding: 0.5rem;
        color: var(--disclaimer-text-light);
        transition: color 0.3s;
      }
      body.dark-mode .disclaimer-text {
        color: var(--disclaimer-text-dark);
      }

      /* Styles for Token Swap Card */
      .token-display-card {
        padding: 0.75rem;
        border: 3px solid var(--border-color);
        border-radius: 0.375rem;
        background-color: var(--token-swap-section-bg-light);
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        width: 120px; /* Or use flex-basis */
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .token-display-card:hover {
        transform: translateY(-4px);
        box-shadow: 8px 8px 0px var(--shadow-color);
      }
      body.dark-mode .token-display-card {
        background-color: var(--token-swap-section-bg-dark);
      }
      .token-display-card .token-icon, .token-display-card .token-icon-placeholder {
          width: 3rem; /* 48px */
          height: 3rem; /* 48px */
          margin-right: 0;
      }

      .token-icon {
        width: 2rem; /* 32px */
        height: 2rem; /* 32px */
        margin-right: 0.5rem;
        border-radius: 9999px; /* full */
        object-fit: cover;
        border: 1px solid var(--border-color);
      }
      .token-icon-placeholder {
        width: 2rem;
        height: 2rem;
        margin-right: 0.5rem;
        border-radius: 9999px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.65rem;
        font-weight: 600;
        color: #4b5563;
        border: 1px solid var(--border-color);
      }
      body.dark-mode .token-icon-placeholder {
        background-color: #4b5563;
        color: #d1d5db;
      }
      .token-name {
        font-weight: 700;
        font-size: 1.125rem;
        color: var(--text-light);
      }
      body.dark-mode .token-name {
        color: var(--text-dark);
      }
      .swap-button-container {
        display: flex;
        justify-content: center;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
      }
      .swap-button {
        padding: 0.5rem;
        border-radius: 9999px;
        border: 3px solid var(--border-color);
        box-shadow: 3px 3px 0px var(--shadow-color);
        background-color: var(--button-toggle-bg-light);
        color: var(--button-toggle-icon-light);
        cursor: pointer;
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
          background-color 0.3s, color 0.3s;
      }
      body.dark-mode .swap-button {
        background-color: var(--button-toggle-bg-dark);
        color: var(--button-toggle-icon-dark);
      }
      .swap-button:hover {
        transform: translate(-1px, -1px);
        box-shadow: 4px 4px 0px var(--shadow-color);
      }
      .swap-button:active {
        transform: translate(1px, 1px);
        box-shadow: 2px 2px 0px var(--shadow-color);
      }

      .info-badges-container {
        margin-bottom: 0.5rem;
      }

      .slippage-badge,
      .wallet-badge {
        display: inline-block;
        padding: 0.35rem 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        font-weight: 600;
        border: 2px solid var(--border-color);
        box-shadow: 2px 2px 0px var(--shadow-color);
        transition: background-color 0.3s, color 0.3s;
        margin: 0.25rem;
      }

      .slippage-badge {
        background-color: var(--badge-bg-light);
        color: var(--badge-text-light);
      }
      body.dark-mode .slippage-badge {
        background-color: var(--badge-bg-dark);
        color: var(--badge-text-dark);
      }
      .wallet-badge {
        background-color: var(--wallet-badge-bg-light);
        color: var(--wallet-badge-text-light);
      }
      body.dark-mode .wallet-badge {
        background-color: var(--wallet-badge-bg-dark);
        color: var(--wallet-badge-text-dark);
      }

      .token-swap-additional-info {
        font-size: 0.875rem;
        text-align: center;
        margin-top: 1rem;
        padding: 0.5rem;
        color: var(--token-swap-info-text-light);
        transition: color 0.3s;
        line-height: 1.6;
      }
      body.dark-mode .token-swap-additional-info {
        color: var(--token-swap-info-text-dark);
      }
      .token-swap-additional-info strong {
        font-weight: 700;
      }

      /* Guide Card Styles */
      #guideCard ul {
        list-style-type: none;
        padding-left: 0;
      }
      #guideCard li {
        position: relative;
        padding-left: 1.75rem;
        margin-bottom: 0.75rem;
        font-size: 0.875rem;
        line-height: 1.6;
      }
      #guideCard li::before {
        content: "→";
        position: absolute;
        left: 0;
        top: 0;
        font-weight: bold;
        color: var(--guide-list-marker-light);
        transition: color 0.3s;
      }
      body.dark-mode #guideCard li::before {
        color: var(--guide-list-marker-dark);
      }
      #guideCard strong {
        font-weight: 700;
        color: var(--button-primary-bg-light);
      }
      body.dark-mode #guideCard strong {
        color: #93c5fd;
      }
      
      /* START: Animated Checkbox Styles */
      .toggle-container {
        display: flex;
        align-items: center;
        margin-bottom: 0.75rem; /* Spacing between checkboxes */
        justify-content: flex-start;
        padding-left: 0.25rem;
      }
      .toggle-container input[type="checkbox"] {
        /* Hide the default checkbox */
        opacity: 0;
        position: absolute;
        width: 1.25em;
        height: 1.25em;
      }
      .toggle-container label {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--text-light);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        transition: transform 0.1s ease-out;
      }
      body.dark-mode .toggle-container label {
        color: var(--text-dark);
      }
       .toggle-container label:active {
        transform: scale(0.95);
      }
      .custom-checkbox-box {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 1.25em;
        height: 1.25em;
        border: 2px solid var(--border-color);
        border-radius: 0.125rem;
        transition: background-color 0.3s, border-color 0.3s;
      }
      .custom-checkbox-box svg {
        width: 0.85em;
        height: 0.85em;
        stroke: var(--button-primary-text-light);
        stroke-width: 3.5;
      }
      body.dark-mode .custom-checkbox-box svg {
        stroke: var(--button-primary-text-dark);
      }
      .custom-checkbox-box svg path {
        stroke-dasharray: 100;
        stroke-dashoffset: 100;
        transition: stroke-dashoffset 0.4s 0.1s ease-out;
      }
      .toggle-container input[type="checkbox"]:checked + label .custom-checkbox-box {
        background-color: var(--button-primary-bg-light);
        border-color: var(--button-primary-bg-light);
      }
      body.dark-mode .toggle-container input[type="checkbox"]:checked + label .custom-checkbox-box {
        background-color: var(--button-primary-bg-dark);
        border-color: var(--button-primary-bg-dark);
      }
      .toggle-container input[type="checkbox"]:checked + label .custom-checkbox-box svg path {
        stroke-dashoffset: 0;
      }
      /* END: Animated Checkbox Styles */


      #volumeCalcResults {
        margin-top: 1.5rem; /* Tailwind mt-6 */
      }
      .calc-result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0; /* Tailwind py-2 */
        border-bottom: 1px dashed var(--grid-line-color-light);
        font-size: 0.875rem; /* Standardized font size for results */
      }
      body.dark-mode .calc-result-item {
        border-bottom-color: var(--grid-line-color-dark);
      }
      .calc-result-item:last-child {
        border-bottom: none;
      }
      .calc-result-label {
        font-weight: 500; /* Tailwind font-medium */
        color: var(--text-light);
        margin-right: 0.5rem;
        flex-shrink: 0; /* Prevent label from shrinking too much */
      }
      body.dark-mode .calc-result-label {
        color: var(--text-dark);
      }
      .calc-result-value {
        font-weight: 600; /* Tailwind font-semibold */
        color: var(--calc-result-strong-light); /* Make all values stand out */
        text-align: right; /* Align value to the right */
      }
      body.dark-mode .calc-result-value {
        color: var(--calc-result-strong-dark);
      }
      .calc-result-value strong {
        color: var(
          --calc-result-strong-light
        ); /* Ensure strong tag uses the same color */
      }
      body.dark-mode .calc-result-value strong {
        color: var(--calc-result-strong-dark);
      }

      /* Specific styling for "Approx. Trades Needed" to make it larger */
      .calc-result-item.trades-needed-item .calc-result-label,
      .calc-result-item.trades-needed-item .calc-result-value {
        font-size: 1.125rem; /* text-lg */
      }
      .calc-result-item.trades-needed-item .calc-result-value strong {
        font-size: 1.5rem; /* text-2xl */
      }

      #bnbBonusResultItem .bnb-bonus-text, #cexBonusResultItem .bnb-bonus-text {
        color: var(--bnb-bonus-text-light) !important;
      }
      body.dark-mode #bnbBonusResultItem .bnb-bonus-text, body.dark-mode #cexBonusResultItem .bnb-bonus-text {
        color: var(--bnb-bonus-text-dark) !important;
      }
      #bnbBonusResultItem strong, #cexBonusResultItem strong {
        color: var(--bnb-bonus-text-light) !important;
      }
      body.dark-mode #bnbBonusResultItem strong, body.dark-mode #cexBonusResultItem strong {
        color: var(--bnb-bonus-text-dark) !important;
      }

      /* START: Highlight Text Animation Styles */
      @keyframes highlight-bg-animation {
        0% {
          background-size: 0% 100%;
        }
        100% {
          background-size: 100% 100%;
        }
      }
      .highlight-text-nav {
        position: relative;
        display: inline-block;
        font-size: 1.5rem;
        font-weight: 700;
        padding: 0.25rem 0.5rem;
        border-radius: 0.375rem;
        color: var(--text-light);
        /* UPDATED: Binance yellow gradient */
        background-image: linear-gradient(to right, #F0B90B, #F8D33A); 
        background-repeat: no-repeat;
        background-position: left center;
        animation: highlight-bg-animation 1.5s ease-out forwards;
        background-size: 0% 100%;
      }
      body.dark-mode .highlight-text-nav {
        color: #000; /* Black text on yellow looks better in dark mode too */
        background-image: linear-gradient(to right, #F0B90B, #F8D33A);
      }
       /* END: Highlight Text Animation Styles */

      /* START: Trades Needed Value Style */
      .trades-needed-highlight {
          color: var(--bnb-bonus-text-light) !important;
          font-weight: 800 !important;
      }
      body.dark-mode .trades-needed-highlight {
          color: var(--bnb-bonus-text-dark) !important;
      }
      /* END: Trades Needed Value Style */


      @media (max-width: 640px) {
        /* sm breakpoint */
        .controls-container {
          flex-direction: row; /* Keep as row */
          justify-content: flex-end; /* Align to the right */
        }
        .toggle-button {
          margin-top: 0;
        }
        .page-title {
          font-size: 1.5rem;
        }
        .results-table th,
        .results-table td {
          padding: 0.3rem;
          font-size: 0.75rem;
        }
        .neobrutalist-marquee {
          font-size: 0.875rem;
          padding: 0.5rem 0.75rem;
        }
        .neobrutalist-marquee .marquee-item svg {
          width: 16px;
          height: 16px;
        }
        .slippage-badge,
        .wallet-badge {
          font-size: 0.75rem;
          padding: 0.25rem 0.5rem;
        }
        #guideCard li {
          font-size: 0.8rem;
        }
        .token-swap-additional-info {
          font-size: 0.8rem;
        }
        .toggle-container {
          flex-direction: column;
          align-items: flex-start;
          justify-content: flex-start; /* Align to left on small screens */
        }
        .toggle-container input[type="checkbox"] {
          margin-bottom: 0.25rem;
        }
        .calc-result-item {
          flex-direction: column;
          align-items: flex-start;
        }
        .calc-result-value {
          margin-top: 0.125rem;
          text-align: left;
        }
        /* Adjust font sizes for calculator results on small screens */
        .calc-result-item.trades-needed-item .calc-result-label,
        .calc-result-item.trades-needed-item .calc-result-value {
          font-size: 1rem; /* text-base for smaller screens */
        }
        .calc-result-item.trades-needed-item .calc-result-value strong {
          font-size: 1.25rem; /* text-xl for smaller screens */
        }
      }
    </style>
  </head>
  <body class="p-4 md:p-8">
    <div class="top-shine-bar"></div>
    <div class="main-container">
      <div class="controls-container">
        <!-- Buttons are now on the right -->
        <div>
          <a
            href="https://accounts.binance.com/register?ref=380270089"
            target="_blank"
            rel="noopener noreferrer"
            id="binanceButton"
            class="toggle-button icon-only">
            <img class="binance-logo" src="https://images.icon-icons.com/3053/PNG/512/binance_macos_bigsur_icon_190342.png" alt="Binance Logo">
          </a>
          <a
            href="https://x.com/drv3v"
            target="_blank"
            rel="noopener noreferrer"
            id="twitterButton"
            class="toggle-button icon-only">
            <svg
              class="icon"
              style="width: 24px; height: 24px"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512">
              <path
                d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"></path>
            </svg>
          </a>
          <button id="languageToggleButton" class="toggle-button">
            <i data-lucide="languages" class="lucide icon"></i>
            <span data-translate="languageToggle">English</span>
          </button>
          <button id="darkModeToggle" class="toggle-button icon-only"></button>
        </div>
      </div>

      <marquee
        class="neobrutalist-marquee"
        behavior="scroll"
        direction="left"
        scrollamount="5">
        <span class="marquee-item">HASHNODE</span>
        <span class="marquee-item">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200" class="marquee-svg-item"><g clip-path="url(#cs_clip_1_triangle-4)"><mask id="cs_mask_1_triangle-4" style="mask-type:alpha" width="200" height="200" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="currentColor" d="M0 0a99.977 99.977 0 0029.273 70.71 100.027 100.027 0 0070.71 29.306V0H0zm99.984 100.016H200V0a100.028 100.028 0 00-70.735 29.292 99.976 99.976 0 00-29.281 70.724zm0 0V200H200a99.957 99.957 0 00-29.293-70.703 100.02 100.02 0 00-70.723-29.281zm0 0H0V200a100.017 100.017 0 0070.703-29.292 99.963 99.963 0 0029.28-70.692z"></path></mask><g mask="url(#cs_mask_1_triangle-4)"><path fill="#fff" d="M200 0H0v200h200V0z"></path><path fill="#07FFE1" d="M200 0H0v200h200V0z"></path><path fill="url(#paint0_linear_748_4949)" d="M200 0H0v200h200V0z"></path><g filter="url(#filter0_f_748_4949)"><ellipse cx="162.682" cy="0.587" fill="#FFD749" rx="83" ry="57" transform="rotate(-33.875 162.682 .587)"></ellipse></g></g></g><defs><filter id="filter0_f_748_4949" width="291.802" height="272.361" x="16.781" y="-135.593" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_748_4949" stdDeviation="35"></feGaussianBlur></filter><linearGradient id="paint0_linear_748_4949" x1="38" x2="119" y1="14.5" y2="181.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE500"></stop><stop offset="1" stop-color="#07FFE1"></stop></linearGradient><clipPath id="cs_clip_1_triangle-4"><path fill="#fff" d="M0 0H200V200H0z"></path></clipPath></defs><g style="mix-blend-mode:overlay" mask="url(#cs_mask_1_triangle-4)"><path fill="gray" stroke="transparent" d="M200 0H0v200h200V0z" filter="url(#cs_noise_1_triangle-4)"></path></g><defs><filter id="cs_noise_1_triangle-4" width="100%" height="100%" x="0%" y="0%" filterUnits="objectBoundingBox"><feTurbulence baseFrequency="0.6" numOctaves="5" result="out1" seed="4"></feTurbulence><feComposite in="out1" in2="SourceGraphic" operator="in" result="out2"></feComposite><feBlend in="SourceGraphic" in2="out2" mode="overlay" result="out3"></feBlend></filter></defs></svg>
        </span>
        <span class="marquee-item">0xPRERICH</span>
        <span class="marquee-item">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200" class="marquee-svg-item"><g clip-path="url(#cs_clip_1_misc-4)"><mask id="cs_mask_1_misc-4" style="mask-type:alpha" width="137" height="200" x="31" y="0" maskUnits="userSpaceOnUse"><path fill="currentColor" d="M82 124H44.017c-9.288 0-15.054-10.119-10.334-18.135l58.26-98.942C99.186-5.377 118-.23 118 14.053V76h37.982c9.288 0 15.054 10.12 10.334 18.135l-58.26 98.942C100.813 205.377 82 200.23 82 185.948V124z"></path></mask><g mask="url(#cs_mask_1_misc-4)"><path fill="#fff" d="M200 0H0v200h200V0z"></path><path fill="url(#paint0_linear_748_5038)" d="M200 0H0v200h200V0z"></path><g filter="url(#filter0_f_748_5038)"><path fill="#18A0FB" d="M216 79H96v135h120V79z"></path></g></g></g><defs><filter id="filter0_f_748_5038" width="245" height="260" x="33.5" y="16.5" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_748_5038" stdDeviation="31.25"></feGaussianBlur></filter><linearGradient id="paint0_linear_748_5038" x1="38" x2="119" y1="14.5" y2="181.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE500"></stop><stop offset="1" stop-color="#07FFE1"></stop></linearGradient><clipPath id="cs_clip_1_misc-4"><path fill="#fff" d="M0 0H200V200H0z"></path></clipPath></defs><g style="mix-blend-mode:overlay" mask="url(#cs_mask_1_misc-4)"><path fill="gray" stroke="transparent" d="M200 0H0v200h200V0z" filter="url(#cs_noise_1_misc-4)"></path></g><defs><filter id="cs_noise_1_misc-4" width="100%" height="100%" x="0%" y="0%" filterUnits="objectBoundingBox"><feTurbulence baseFrequency="0.6" numOctaves="5" result="out1" seed="4"></feTurbulence><feComposite in="out1" in2="SourceGraphic" operator="in" result="out2"></feComposite><feBlend in="SourceGraphic" in2="out2" mode="overlay" result="out3"></feBlend></filter></defs></svg>
        </span>
        <span class="marquee-item">BINANCE ALPHA</span>
        <span class="marquee-item">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200" class="marquee-svg-item"><g clip-path="url(#cs_clip_1_rectangle-6)"><mask id="cs_mask_1_rectangle-6" style="mask-type:alpha" width="200" height="200" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="currentColor" d="M150 0v50H50V0h100zM50 150V50H0v100h50zM150 150V50h50v100h-50zM150 150H50v50h100v-50z"></path></mask><g mask="url(#cs_mask_1_rectangle-6)"><path fill="#07FFE1" d="M200 0H0v200h200V0z"></path><path fill="url(#paint0_linear_748_5083)" d="M200 0H0v200h200V0z"></path></g></g><defs><linearGradient id="paint0_linear_748_5083" x1="38" x2="119" y1="14.5" y2="181.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE500"></stop><stop offset="1" stop-color="#07FFE1"></stop></linearGradient><clipPath id="cs_clip_1_rectangle-6"><path fill="#fff" d="M0 0H200V200H0z"></path></clipPath></defs><g style="mix-blend-mode:overlay" mask="url(#cs_mask_1_rectangle-6)"><path fill="gray" stroke="transparent" d="M200 0H0v200h200V0z" filter="url(#cs_noise_1_rectangle-6)"></path></g><defs><filter id="cs_noise_1_rectangle-6" width="100%" height="100%" x="0%" y="0%" filterUnits="objectBoundingBox"><feTurbulence baseFrequency="0.6" numOctaves="5" result="out1" seed="4"></feTurbulence><feComposite in="out1" in2="SourceGraphic" operator="in" result="out2"></feComposite><feBlend in="SourceGraphic" in2="out2" mode="overlay" result="out3"></feBlend></filter></defs></svg>
        </span>
        <span class="marquee-item">HASHNODE</span>
        <span class="marquee-item">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200" class="marquee-svg-item"><g clip-path="url(#cs_clip_1_triangle-4)"><mask id="cs_mask_1_triangle-4" style="mask-type:alpha" width="200" height="200" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="currentColor" d="M0 0a99.977 99.977 0 0029.273 70.71 100.027 100.027 0 0070.71 29.306V0H0zm99.984 100.016H200V0a100.028 100.028 0 00-70.735 29.292 99.976 99.976 0 00-29.281 70.724zm0 0V200H200a99.957 99.957 0 00-29.293-70.703 100.02 100.02 0 00-70.723-29.281zm0 0H0V200a100.017 100.017 0 0070.703-29.292 99.963 99.963 0 0029.28-70.692z"></path></mask><g mask="url(#cs_mask_1_triangle-4)"><path fill="#fff" d="M200 0H0v200h200V0z"></path><path fill="#07FFE1" d="M200 0H0v200h200V0z"></path><path fill="url(#paint0_linear_748_4949)" d="M200 0H0v200h200V0z"></path><g filter="url(#filter0_f_748_4949)"><ellipse cx="162.682" cy="0.587" fill="#FFD749" rx="83" ry="57" transform="rotate(-33.875 162.682 .587)"></ellipse></g></g></g><defs><filter id="filter0_f_748_4949" width="291.802" height="272.361" x="16.781" y="-135.593" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_748_4949" stdDeviation="35"></feGaussianBlur></filter><linearGradient id="paint0_linear_748_4949" x1="38" x2="119" y1="14.5" y2="181.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE500"></stop><stop offset="1" stop-color="#07FFE1"></stop></linearGradient><clipPath id="cs_clip_1_triangle-4"><path fill="#fff" d="M0 0H200V200H0z"></path></clipPath></defs><g style="mix-blend-mode:overlay" mask="url(#cs_mask_1_triangle-4)"><path fill="gray" stroke="transparent" d="M200 0H0v200h200V0z" filter="url(#cs_noise_1_triangle-4)"></path></g><defs><filter id="cs_noise_1_triangle-4" width="100%" height="100%" x="0%" y="0%" filterUnits="objectBoundingBox"><feTurbulence baseFrequency="0.6" numOctaves="5" result="out1" seed="4"></feTurbulence><feComposite in="out1" in2="SourceGraphic" operator="in" result="out2"></feComposite><feBlend in="SourceGraphic" in2="out2" mode="overlay" result="out3"></feBlend></filter></defs></svg>
        </span>
        <span class="marquee-item">0xPRERICH</span>
        <span class="marquee-item">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200" class="marquee-svg-item"><g clip-path="url(#cs_clip_1_misc-4)"><mask id="cs_mask_1_misc-4" style="mask-type:alpha" width="137" height="200" x="31" y="0" maskUnits="userSpaceOnUse"><path fill="currentColor" d="M82 124H44.017c-9.288 0-15.054-10.119-10.334-18.135l58.26-98.942C99.186-5.377 118-.23 118 14.053V76h37.982c9.288 0 15.054 10.12 10.334 18.135l-58.26 98.942C100.813 205.377 82 200.23 82 185.948V124z"></path></mask><g mask="url(#cs_mask_1_misc-4)"><path fill="#fff" d="M200 0H0v200h200V0z"></path><path fill="url(#paint0_linear_748_5038)" d="M200 0H0v200h200V0z"></path><g filter="url(#filter0_f_748_5038)"><path fill="#18A0FB" d="M216 79H96v135h120V79z"></path></g></g></g><defs><filter id="filter0_f_748_5038" width="245" height="260" x="33.5" y="16.5" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend><feGaussianBlur result="effect1_foregroundBlur_748_5038" stdDeviation="31.25"></feGaussianBlur></filter><linearGradient id="paint0_linear_748_5038" x1="38" x2="119" y1="14.5" y2="181.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE500"></stop><stop offset="1" stop-color="#07FFE1"></stop></linearGradient><clipPath id="cs_clip_1_misc-4"><path fill="#fff" d="M0 0H200V200H0z"></path></clipPath></defs><g style="mix-blend-mode:overlay" mask="url(#cs_mask_1_misc-4)"><path fill="gray" stroke="transparent" d="M200 0H0v200h200V0z" filter="url(#cs_noise_1_misc-4)"></path></g><defs><filter id="cs_noise_1_misc-4" width="100%" height="100%" x="0%" y="0%" filterUnits="objectBoundingBox"><feTurbulence baseFrequency="0.6" numOctaves="5" result="out1" seed="4"></feTurbulence><feComposite in="out1" in2="SourceGraphic" operator="in" result="out2"></feComposite><feBlend in="SourceGraphic" in2="out2" mode="overlay" result="out3"></feBlend></filter></defs></svg>
        </span>
        <span class="marquee-item">BINANCE ALPHA</span>
        <span class="marquee-item">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 200 200" class="marquee-svg-item"><g clip-path="url(#cs_clip_1_rectangle-6)"><mask id="cs_mask_1_rectangle-6" style="mask-type:alpha" width="200" height="200" x="0" y="0" maskUnits="userSpaceOnUse"><path fill="currentColor" d="M150 0v50H50V0h100zM50 150V50H0v100h50zM150 150V50h50v100h-50zM150 150H50v50h100v-50z"></path></mask><g mask="url(#cs_mask_1_rectangle-6)"><path fill="#07FFE1" d="M200 0H0v200h200V0z"></path><path fill="url(#paint0_linear_748_5083)" d="M200 0H0v200h200V0z"></path></g></g><defs><linearGradient id="paint0_linear_748_5083" x1="38" x2="119" y1="14.5" y2="181.5" gradientUnits="userSpaceOnUse"><stop stop-color="#FFE500"></stop><stop offset="1" stop-color="#07FFE1"></stop></linearGradient><clipPath id="cs_clip_1_rectangle-6"><path fill="#fff" d="M0 0H200V200H0z"></path></clipPath></defs><g style="mix-blend-mode:overlay" mask="url(#cs_mask_1_rectangle-6)"><path fill="gray" stroke="transparent" d="M200 0H0v200h200V0z" filter="url(#cs_noise_1_rectangle-6)"></path></g><defs><filter id="cs_noise_1_rectangle-6" width="100%" height="100%" x="0%" y="0%" filterUnits="objectBoundingBox"><feTurbulence baseFrequency="0.6" numOctaves="5" result="out1" seed="4"></feTurbulence><feComposite in="out1" in2="SourceGraphic" operator="in" result="out2"></feComposite><feBlend in="SourceGraphic" in2="out2" mode="overlay" result="out3"></feBlend></filter></defs></svg>
        </span>
      </marquee>

      <!-- How to Use Card -->
      <div id="guideCard" class="neobrutalist-card">
        <div class="card-header" data-collapsible-target="guideContent">
          <h2 class="text-xl font-semibold" data-translate="guideTitle">
            How to Use This Simulator
          </h2>
          <button
            aria-label="Toggle guide content"
            aria-expanded="false"
            class="card-toggle-button p-1">
            <i data-lucide="chevron-down" class="card-toggle-icon w-6 h-6"></i>
          </button>
        </div>
        <div id="guideContent" class="card-content pt-4 hidden">
          <ul id="guideList">
            <li data-translate="guideStep1"></li>
            <li data-translate="guideStep2"></li>
            <li data-translate="guideStep5"></li>
            <li data-translate="guideStep6"></li>
            <li data-translate="guideStep7"></li>
          </ul>
        </div>
      </div>

      <!-- Token Swap Card -->
      <div id="swapCard" class="neobrutalist-card">
        <div class="card-header" data-collapsible-target="swapContent">
          <h2 class="text-xl font-semibold" data-translate="swapCardTitle">
            Token Swap Recommended
          </h2>
          <button
            aria-label="Toggle token swap content"
            aria-expanded="false"
            class="card-toggle-button p-1">
            <i data-lucide="chevron-down" class="card-toggle-icon w-6 h-6"></i>
          </button>
        </div>
        <div id="swapContent" class="card-content pt-4 hidden">
            <div class="w-full max-w-md mx-auto">
                <div class="flex justify-center items-center flex-wrap gap-2">
                    <!-- KOGE Token -->
                    <a href="https://coinmarketcap.com/currencies/bnb48-club-token/" target="_blank" rel="noopener noreferrer" class="token-display-card">
                        <img id="tokenKogeIcon" src="" alt="KOGE Token" class="token-icon">
                        <div id="tokenKogePlaceholder" class="token-icon-placeholder" style="display: none;"></div>
                        <span id="tokenKogeName" class="token-name"></span>
                    </a>
                    <!-- BR Token -->
                    <a href="https://coinmarketcap.com/currencies/bedrock-dao/" target="_blank" rel="noopener noreferrer" class="token-display-card">
                        <img id="tokenBrIcon" src="" alt="BR Token" class="token-icon">
                        <div id="tokenBrPlaceholder" class="token-icon-placeholder" style="display: none;"></div>
                        <span id="tokenBrName" class="token-name"></span>
                    </a>
                    <!-- OIK Token -->
                    <a href="https://coinmarketcap.com/currencies/space-nation/" target="_blank" rel="noopener noreferrer" class="token-display-card">
                        <img id="tokenOikIcon" src="" alt="OIK Token" class="token-icon">
                        <div id="tokenOikPlaceholder" class="token-icon-placeholder" style="display: none;"></div>
                        <span id="tokenOikName" class="token-name"></span>
                    </a>
                </div>
                <p
                    class="token-swap-additional-info mt-4"
                    data-translate="tokenSwapInfoText">
                    <!-- Content will be injected by JavaScript -->
                </p>
                <div class="info-badges-container flex justify-center mt-4">
                    <span class="slippage-badge" data-translate="slippageText">Slippage Tolerance: 0.01%</span>
                    <span class="wallet-badge" data-translate="tradedOnWalletText">Traded on CEX Limit</span>
                </div>
            </div>
        </div>
      </div>

      <!-- Volume Points Trade Calculator Card -->
      <div id="volumeCalcCard" class="neobrutalist-card">
        <div class="card-header" data-collapsible-target="volumeCalcContent">
          <h2 class="text-xl font-semibold" data-translate="volumeCalcTitle">
            Volume Points Trade Calculator
          </h2>
          <button
            aria-label="Toggle volume calculator content"
            aria-expanded="true"
            class="card-toggle-button p-1">
            <i data-lucide="chevron-up" class="card-toggle-icon w-6 h-6"></i>
          </button>
        </div>
        <div id="volumeCalcContent" class="card-content pt-4">
          <div id="volumeCalcErrorMessageContainer" class="mb-4"></div>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-8 mb-2">
            <div>
              <label
                for="initialInvestmentVolCalc"
                class="input-label"
                data-translate="initialInvestmentVolCalcLabel"
                >Initial Investment (USD per trade)</label
              >
              <input
                type="number"
                id="initialInvestmentVolCalc"
                class="input-field"
                value="500"
                min="1" />
            </div>
            <div>
              <label
                for="targetVolumePointsCalc"
                class="input-label"
                data-translate="targetVolumePointsCalcLabel"
                >Target Volume Points</label
              >
              <input
                type="number"
                id="targetVolumePointsCalc"
                class="input-field"
                value="14"
                min="1" />
            </div>
          </div>
          <div class="toggle-container">
            <input type="checkbox" id="bnbChainToggle" />
            <label for="bnbChainToggle">
                <span class="custom-checkbox-box">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                    </svg>
                </span>
                <span data-translate="bnbChainToggleLabel">Trade on Wallet (2x Points Bonus)</span>
            </label>
          </div>
          <div class="toggle-container">
            <input type="checkbox" id="cexLimitToggle" />
            <label for="cexLimitToggle">
                <span class="custom-checkbox-box">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                    </svg>
                </span>
                <span data-translate="cexLimitToggleLabel">Trade on CEX Limit (x4 Point Bonus)</span>
            </label>
          </div>
          <button
            id="calculateTradesButton"
            class="simulate-button mt-4"
            data-translate="calculateTradesButtonLabel">
            Calculate Trades
          </button>

          <div
            id="volumeCalcResults"
            class="mt-6 space-y-3"
            style="display: none">
            <div class="calc-result-item">
              <span class="calc-result-label" data-translate="volCalcMsg1"
                >Target:</span
              >
              <span class="calc-result-value"
                ><strong id="targetPointsDisplayV"></strong>
                <span data-translate="pointsUnit">points</span></span
              >
            </div>
            <div class="calc-result-item">
              <span class="calc-result-label" data-translate="volCalcMsg2"
                >Standard trade volume for points:</span
              >
              <span class="calc-result-value"
                >$<strong id="standardVolumeDisplayV"></strong
              ></span>
            </div>
            <div
              id="bnbBonusResultItem"
              class="calc-result-item"
              style="display: none">
              <span
                class="calc-result-label bnb-bonus-text"
                data-translate="bnbBonusMsgLabel"
                >Wallet Bonus - Effective Volume:</span
              >
              <span class="calc-result-value bnb-bonus-text"
                >$<strong id="effectiveVolumeDisplayV"></strong
              ></span>
            </div>
            <div
              id="cexBonusResultItem"
              class="calc-result-item"
              style="display: none">
              <span
                class="calc-result-label bnb-bonus-text"
                data-translate="cexBonusMsgLabel"
                >CEX Limit Bonus - Effective Volume:</span
              >
              <span class="calc-result-value bnb-bonus-text"
                >$<strong id="effectiveCexVolumeDisplayV"></strong
              ></span>
            </div>
            <div id="investmentResultItem" class="calc-result-item">
              <span class="calc-result-label" data-translate="volCalcMsg3"
                >Investment per Trade:</span
              >
              <span class="calc-result-value"
                >$<strong id="investmentPerTradeDisplayV"></strong
              ></span>
            </div>
            <div class="calc-result-item">
              <!-- Reordered: Total Actual Volume before Trades Needed -->
              <span class="calc-result-label" data-translate="volCalcMsg5"
                >Total Actual Volume:</span
              >
              <span class="calc-result-value"
                >$<strong id="totalAchievedVolumeDisplayV"></strong
              ></span>
            </div>
            <div class="calc-result-item trades-needed-item">
              <span class="calc-result-label" data-translate="volCalcMsg4"
                >Approx. Trades Needed:</span
              >
              <span id="tradesNeededResult" class="calc-result-value">
                <!-- Content injected by JS -->
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Alpha Score Rolling Simulator Card -->
      <div id="alphaScoreSimulatorCard" class="neobrutalist-card">
        <div class="card-header" data-collapsible-target="alphaScoreContent">
          <h1 class="page-title" data-translate="pageTitle">
            Alpha Score Rolling Simulator
          </h1>
          <button
            aria-label="Toggle alpha score simulator content"
            aria-expanded="true"
            class="card-toggle-button p-1">
            <i data-lucide="chevron-up" class="card-toggle-icon w-6 h-6"></i>
          </button>
        </div>
        <div id="alphaScoreContent" class="card-content pt-4">
          <div id="errorMessageContainer" class="mb-4"></div>

          <div
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-8 mb-8">
            <div>
              <label
                for="fixedDailyScore"
                class="input-label"
                data-translate="fixedDailyScoreLabel"
                >Fixed Daily Score</label
              >
              <input
                type="number"
                id="fixedDailyScore"
                class="input-field"
                value="16" />
            </div>
            <div>
              <label
                for="totalDays"
                class="input-label"
                data-translate="totalDaysLabel"
                >Total Days</label
              >
              <input
                type="number"
                id="totalDays"
                class="input-field"
                value="15"
                min="1" />
            </div>
            <div class="hidden">
              <label
                for="rollingWindow"
                class="input-label"
                data-translate="rollingWindowLabel"
                >Rolling Window (days)</label
              >
              <input
                type="number"
                id="rollingWindow"
                class="input-field"
                value="15"
                min="1"
                readonly />
            </div>
            <div>
              <label
                for="thresholdScore"
                class="input-label"
                data-translate="thresholdScoreLabel"
                >Threshold Score</label
              >
              <input
                type="number"
                id="thresholdScore"
                class="input-field"
                value="220" />
            </div>
            <div class="hidden">
              <label
                for="pointsConsumed"
                class="input-label"
                data-translate="pointsConsumedLabel"
                >Points Consumed per Claim</label
              >
              <input
                type="number"
                id="pointsConsumed"
                class="input-field"
                value="15"
                readonly />
            </div>
            <div>
              <label
                for="rewardPerClaim"
                class="input-label"
                data-translate="rewardPerClaimLabel"
                >Reward per Claim (USD)</label
              >
              <input
                type="number"
                id="rewardPerClaim"
                class="input-field"
                value="50" />
            </div>
          </div>

          <button
            id="simulateButton"
            class="simulate-button"
            data-translate="simulateButton">
            Simulate
          </button>
        </div>
      </div>

      <div id="summaryCard" class="neobrutalist-card hidden">
        <!-- Initially hidden, shown by JS -->
        <div class="card-header" data-collapsible-target="summaryContent">
          <h2 class="text-xl font-semibold" data-translate="summaryTitle">
            Simulation Summary
          </h2>
          <button
            aria-label="Toggle summary content"
            aria-expanded="true"
            class="card-toggle-button p-1">
            <i data-lucide="chevron-up" class="card-toggle-icon w-6 h-6"></i>
          </button>
        </div>
        <div id="summaryContent" class="card-content pt-4">
          <p id="summaryText" class="summary-text"></p>
        </div>
      </div>

      <div id="resultsCard" class="neobrutalist-card hidden">
        <!-- Initially hidden, shown by JS -->
        <div class="card-header" data-collapsible-target="resultsContent">
          <h2 class="text-xl font-semibold" data-translate="resultsTitle">
            Simulation Details
          </h2>
          <button
            aria-label="Toggle results content"
            aria-expanded="true"
            class="card-toggle-button p-1">
            <i data-lucide="chevron-up" class="card-toggle-icon w-6 h-6"></i>
          </button>
        </div>
        <div id="resultsContent" class="card-content pt-4">
          <div class="overflow-x-auto">
            <table class="results-table">
              <thead>
                <tr>
                  <th data-translate="tableDay">Day</th>
                  <th data-translate="tableDailyScore">Score</th>
                  <th data-translate="tableTotalInWindow">Total</th>
                  <th data-translate="tableClaimed">Claimed?</th>
                  <th data-translate="tablePtsConsumed">Pts Used</th>
                  <th data-translate="tableRewardToday">Reward (USD)</th>
                  <th data-translate="tableWindowRange">Window</th>
                </tr>
              </thead>
              <tbody id="resultsTableBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="disclaimerSection" class="disclaimer-text">
        <p data-translate="disclaimerText">
          Disclaimer: This simulator is for informational and entertainment
          purposes only and does not constitute financial advice.
        </p>
      </div>
    </div>

    <script>
      lucide.createIcons();

      const translations = {
        en: {
          languageToggle: "English",
          pageTitle: "Alpha Score Rolling Simulator",
          guideTitle: "How to Use This Simulator",
          guideStep1:
            "<strong>Alpha Sim:</strong> Enter daily score, total days, rolling window, threshold, points consumed, and reward to see claim projections.",
          guideStep2:
            "<strong>Token Swap Card:</strong> Shows recommended tokens like KOGE, BR, and OIK for trading. It also provides key reminders about setting a low slippage tolerance (e.g., 0.01%) and the benefits of trading on a CEX with limit orders for point bonuses.",
          guideStep5:
            "<strong>Note:</strong> This simulator is for informational and entertainment purposes only and does not constitute financial advice.",
          guideStep6: "",
          guideStep7: "",
          fixedDailyScoreLabel: "Fixed Daily Score",
          totalDaysLabel: "Total Days",
          rollingWindowLabel: "Rolling Window (days)",
          thresholdScoreLabel: "Threshold Score",
          pointsConsumedLabel: "Points Consumed per Claim",
          rewardPerClaimLabel: "Reward per Claim (USD)",
          simulateButton: "Simulate",
          summaryTitle: "Simulation Summary",
          resultsTitle: "Simulation Details",
          swapCardTitle: "Token Swap Recommended",
          slippageText: "Slippage Tolerance: 0.01%",
          tradedOnWalletText: "Traded on CEX Limit",
          tokenSwapInfoText:
            "<strong>Token Swap Info:</strong> Consider tokens with good market cap like <strong>KOGE</strong>, <strong>BR</strong>, and <strong>OIK</strong> for potentially less price swing. If trading on a wallet, always set slippage around <strong>0.01%</strong>. Recommended trading on <strong>CEX Limit</strong> for 4x Points Bonus.",
          volumeCalcTitle: "Volume Points Trade Calculator",
          initialInvestmentVolCalcLabel: "Initial Investment (USD per trade)",
          targetVolumePointsCalcLabel: "Target Volume Points",
          calculateTradesButtonLabel: "Calculate Trades",
          bnbChainToggleLabel: "Trade on Wallet (2x Points Bonus)",
          cexLimitToggleLabel: "Trade on CEX Limit (x4 Point Bonus)",
          volCalcMsg1: "Target:",
          pointsUnit: "points",
          volCalcMsg2: "Standard trade volume for points:",
          bnbBonusMsgLabel: "Wallet Bonus - Effective Volume:",
          cexBonusMsgLabel: "CEX Limit Bonus - Effective Volume:",
          volCalcMsg3: "Investment per Trade:",
          volCalcMsg4: "Approx. Trades Needed:",
          tradesUnit: "trades",
          volCalcMsg5: "Total Actual Volume:",
          errorInitialInvestment:
            "Initial Investment must be a positive number.",
          errorTargetVolumePoints:
            "Target Volume Points must be a positive number.",
          tableDay: "Day",
          tableDailyScore: "Score",
          tableTotalInWindow: "Total",
          tableClaimed: "Claimed?",
          tablePtsConsumed: "Pts Used",
          tableRewardToday: "Reward (USD)",
          tableWindowRange: "Window",
          errorNegativeScore: "Fixed Daily Score cannot be negative.",
          errorTotalDays: "Total Days must be greater than 0.",
          errorRollingWindow: "Rolling Window must be greater than 0.",
          errorWindowExceedsTotal: "Rolling Window cannot exceed Total Days.",
          errorThresholdScore: "Threshold Score must be greater than 0.",
          errorPointsConsumed: "Points Consumed per Claim cannot be negative.",
          errorRewardPerClaim: "Reward per Claim cannot be negative.",
          summaryClaimedText:
            "✅ Claimed {count} times, total reward {reward} USD",
          disclaimerText:
            "Disclaimer: This simulator is for informational and entertainment purposes only and does not constitute financial advice.",
        },
        km: {
          languageToggle: "ភាសាខ្មែរ",
          pageTitle: "កម្មវិធីគណនាពិន្ទុអាល់ហ្វា",
          guideTitle: "របៀបប្រើកម្មវិធីគណនានេះ",
          guideStep1:
            "<strong>កម្មវិធីគណនាពិន្ទុអាល់ហ្វា៖</strong> បញ្ចូលពិន្ទុប្រចាំថ្ងៃ, ចំនួនថ្ងៃ, រយៈពេលវិលជុំ, កម្រិតពិន្ទុ, ពិន្ទុប្រើប្រាស់, និងរង្វាន់ ដើម្បីមើលការព្យាករណ៍។",
          guideStep2:
            "<strong>កាតដោះដូរថូខឹន៖</strong> បង្ហាញថូខឹនដែលបានណែនាំដូចជា KOGE, BR, និង OIK សម្រាប់​ការជួញដូរ។ វាក៏ផ្តល់នូវការរំលឹកសំខាន់ៗអំពីការកំណត់ Slippage Tolerance ឱ្យទាប (ឧ. 0.01%) និងអត្ថប្រយោជន៍នៃការជួញដូរនៅលើ CEX ជាមួយ Limit Order ដើម្បីទទួលបានពិន្ទុបន្ថែម។",
          guideStep5:
            "<strong>កំណត់ចំណាំ៖</strong> កម្មវិធីគណនាធ្វើនេះគឺសម្រាប់គោលបំណងផ្តល់ព័ត៌មាន និងការកម្សាន្តតែប៉ុណ្ណោះ ហើយមិនមែនជាដំបូន្មានផ្នែកហិរញ្ញវត្ថុទេ។",
          guideStep6: "",
          guideStep7: "",
          fixedDailyScoreLabel: "ពិន្ទុថេរប្រចាំថ្ងៃ",
          totalDaysLabel: "ចំនួនថ្ងៃសរុប",
          rollingWindowLabel: "វិលត្រលប់ (ថ្ងៃ)",
          thresholdScoreLabel: "គោលដៅពិន្ទុ",
          pointsConsumedLabel: "ពិន្ទុប្រើប្រាស់ក្នុងការទទួលយកម្តង",
          rewardPerClaimLabel: "រង្វាន់ក្នុងមួយការទទួលយកម្តង (USD)",
          simulateButton: "គណនា",
          summaryTitle: "សេចក្ដីសង្ខេបនៃការគណនា",
          resultsTitle: "ព័ត៌មានលម្អិតនៃការគណនា",
          swapCardTitle: "ការដោះដូរថូខឹនដែលបានណែនាំ",
          slippageText: "ការអត់ធ្មត់លើថ្លៃ​ Slippage ៖ 0.01%",
          tradedOnWalletText: "ជួញដូរនៅលើ CEX Limit",
          tokenSwapInfoText:
            "<strong>ព័ត៌មានអំពីការដោះដូរថូខឹន៖</strong> សូមពិចារណាថូខឹនដែលមានទីផ្សារល្អដូចជា <strong>KOGE</strong>, <strong>BR</strong>, និង <strong>OIK</strong> ដែលអាចមានការប្រែប្រួលតម្លៃតិចជាង។ ប្រសិនបើជួញដូរលើ Wallet សូមកំណត់ slippage ប្រហែល <strong>0.01%</strong> ជានិច្ច។ បានណែនាំឱ្យធ្វើពាណិជ្ជកម្មនៅលើ <strong>CEX Limit</strong> សម្រាប់ Bonus ពិន្ទុ4ដង។",
          volumeCalcTitle: "កម្មវិធីគណនាពិន្ទុបរិមាណការជួញដូរ",
          initialInvestmentVolCalcLabel: "ការវិនិយោគ (USD ក្នុងការជួញដូរម្តង)",
          targetVolumePointsCalcLabel: "គោលដៅពិន្ទុបរិមាណ",
          calculateTradesButtonLabel: "គណនាការជួញដូរ",
          bnbChainToggleLabel: "ជួញដូរលើ Wallet (គុណនឹង2ពិន្ទុ)",
          cexLimitToggleLabel: "ជួញដូរលើ CEX Limit (គុណនឹង4ពិន្ទុ)",
          volCalcMsg1: "គោលដៅ៖",
          pointsUnit: "ពិន្ទុ",
          volCalcMsg2: "បរិមាណការជួញដូរស្ដង់ដារសម្រាប់ពិន្ទុនេះ៖",
          bnbBonusMsgLabel: "Bonus Wallet - បរិមាណមានប្រសិទ្ធភាព៖",
          cexBonusMsgLabel: "Bonus CEX Limit - បរិមាណមានប្រសិទ្ធភាព៖",
          volCalcMsg3: "ការវិនិយោគក្នុងមួយការជួញដូរម្តង៖",
          volCalcMsg4: "ចំនួនការជួញដូរដែលត្រូវការ (ប្រហាក់ប្រហែល)៖",
          tradesUnit: "ការជួញដូរ",
          volCalcMsg5: "បរិមាណជួញដូរសរុបជាក់ស្តែង៖",
          errorInitialInvestment: "ការវិនិយោគដំបូងត្រូវតែជាលេខវិជ្ជមាន។",
          errorTargetVolumePoints: "គោលដៅពិន្ទុបរិមាណត្រូវតែជាលេខវិជ្ជមាន។",
          tableDay: "ថ្ងៃទី",
          tableDailyScore: "ពិន្ទុ",
          tableTotalInWindow: "ពិន្ទុសរុប",
          tableClaimed: "ប្រហែលអាចទទួលបាន?",
          tablePtsConsumed: "ពិន្ទុបានប្រើ",
          tableRewardToday: "រង្វាន់ (USD)",
          tableWindowRange: "រយៈពេល",
          errorNegativeScore: "ពិន្ទុថេរប្រចាំថ្ងៃមិនអាចអវិជ្ជមានបានទេ។",
          errorTotalDays: "ចំនួនថ្ងៃសរុបត្រូវតែធំជាង 0។",
          errorRollingWindow: "វិលត្រលប់ (ថ្ងៃ)ត្រូវតែធំជាង 0។",
          errorWindowExceedsTotal:
            "វិលត្រលប់ (ថ្ងៃ)មិនអាចលើសពីจำนวนថ្ងៃសរុបបានទេ។",
          errorThresholdScore: "គោលដៅពិន្ទុត្រូវតែធំជាង 0។",
          errorPointsConsumed:
            "ពិន្ទុប្រើប្រាស់ក្នុងការទទួលយកម្តងមិនអាចអវិជ្ជមានបានទេ។",
          errorRewardPerClaim:
            "រង្វាន់ក្នុងមួយការទទួលយកម្តង (USD)មិនអាចអវិជ្ជមានបានទេ។",
          summaryClaimedText:
            "✅ ប្រហែលអាចទទួលបាន {count} ដង, រង្វាន់សរុប {reward} USD",
          disclaimerText:
            "ការបដិសេធ៖ កម្មវិធីគណនានេះគឺសម្រាប់គោលបំណងផ្តល់ព័ត៌មាន និងការកម្សាន្តតែប៉ុណ្ណោះ ហើយមិនមែនជាដំបូន្មានផ្នែកហិរញ្ញវត្ថុទេ។",
        },
      };

      let currentLanguage = "km";
      let isDarkMode = false;

      // DOM Elements for Alpha Score Simulator
      const fixedDailyScoreEl = document.getElementById("fixedDailyScore");
      const totalDaysEl = document.getElementById("totalDays");
      const rollingWindowEl = document.getElementById("rollingWindow");
      const thresholdScoreEl = document.getElementById("thresholdScore");
      const pointsConsumedEl = document.getElementById("pointsConsumed");
      const rewardPerClaimEl = document.getElementById("rewardPerClaim");
      const simulateButtonEl = document.getElementById("simulateButton");

      const summaryCardEl = document.getElementById("summaryCard");
      const summaryTextEl = document.getElementById("summaryText");

      const resultsCardEl = document.getElementById("resultsCard");
      const resultsTableBodyEl = document.getElementById("resultsTableBody");
      const errorMessageContainerEl = document.getElementById(
        "errorMessageContainer"
      );
      const disclaimerSectionEl = document.getElementById("disclaimerSection");
      const guideCardEl = document.getElementById("guideCard");

      // DOM Elements for UI Controls
      const languageToggleButton = document.getElementById(
        "languageToggleButton"
      );
      const darkModeToggle = document.getElementById("darkModeToggle");
      const twitterButton = document.getElementById("twitterButton");
      const bodyEl = document.body;

      // DOM Elements for Token Swap Card
      const swapCardEl = document.getElementById("swapCard");
      
      // DOM Elements for Volume Points Calculator
      const initialInvestmentVolCalcEl = document.getElementById(
        "initialInvestmentVolCalc"
      );
      const targetVolumePointsCalcEl = document.getElementById(
        "targetVolumePointsCalc"
      );
      const bnbChainToggleEl = document.getElementById("bnbChainToggle");
      const cexLimitToggleEl = document.getElementById("cexLimitToggle");
      const calculateTradesButtonEl = document.getElementById(
        "calculateTradesButton"
      );
      const volumeCalcResultsEl = document.getElementById("volumeCalcResults");
      const volumeCalcErrorMessageContainerEl = document.getElementById(
        "volumeCalcErrorMessageContainer"
      );
      const targetPointsDisplayVEl = document.getElementById(
        "targetPointsDisplayV"
      );
      const standardVolumeDisplayVEl = document.getElementById(
        "standardVolumeDisplayV"
      );
      const bnbBonusResultItemEl =
        document.getElementById("bnbBonusResultItem");
      const cexBonusResultItemEl =
        document.getElementById("cexBonusResultItem");
      const effectiveVolumeDisplayVEl = document.getElementById(
        "effectiveVolumeDisplayV"
      );
       const effectiveCexVolumeDisplayVEl = document.getElementById(
        "effectiveCexVolumeDisplayV"
      );
      const investmentPerTradeDisplayVEl = document.getElementById(
        "investmentPerTradeDisplayV"
      );
      const tradesNeededResultEl = document.getElementById("tradesNeededResult");
      const totalAchievedVolumeDisplayVEl = document.getElementById(
        "totalAchievedVolumeDisplayV"
      );

      // Initial data for tokens
      const tokenData = {
        koge: {
          name: "KOGE",
          iconSrc: "https://s2.coinmarketcap.com/static/img/coins/64x64/7184.png",
          alt: "KOGE Token",
          placeholderText: "KOGE",
        },
        br: {
          name: "BR",
          iconSrc: "https://s2.coinmarketcap.com/static/img/coins/64x64/36063.png",
          alt: "BR Token",
          placeholderText: "BR",
        },
        oik: {
          name: "OIK",
          iconSrc: "https://s2.coinmarketcap.com/static/img/coins/64x64/36011.png",
          alt: "OIK Token",
          placeholderText: "OIK",
        }
      };

      // Function to handle card collapse/expand
      function toggleCardContent(buttonElement) {
        if (
          !buttonElement ||
          typeof buttonElement.setAttribute !== "function"
        ) {
          return;
        }
        const cardHeader = buttonElement.closest(".card-header");
        if (!cardHeader || !cardHeader.dataset.collapsibleTarget) {
          return;
        }

        const targetId = cardHeader.dataset.collapsibleTarget;
        const contentElement = document.getElementById(targetId);
        const iconElement = buttonElement.querySelector("i.card-toggle-icon");

        if (!contentElement) {
          return;
        }

        const isHidden = contentElement.classList.toggle("hidden");
        buttonElement.setAttribute("aria-expanded", String(!isHidden));

        if (iconElement) {
          iconElement.setAttribute(
            "data-lucide",
            isHidden ? "chevron-down" : "chevron-up"
          );
          lucide.createIcons({
            nodes: [iconElement],
          });
        }
      }

      function updateUIText() {
        document.querySelectorAll("[data-translate]").forEach((element) => {
          const key = element.getAttribute("data-translate");
          const translationExists =
            translations[currentLanguage] && translations[currentLanguage][key];

          if (translationExists) {
            const translationText = translations[currentLanguage][key];
            if (element.id === "languageToggleButton") {
              const textSpan = element.querySelector("span");
              if (textSpan) {
                textSpan.textContent = translationText;
              }
            } else if (
              element.classList.contains("slippage-badge") ||
              element.classList.contains("wallet-badge") ||
              element.classList.contains("token-swap-additional-info")
            ) {
              element.innerHTML = translationText;
            } else if (
              element.tagName === "LI" &&
              element.parentElement &&
              element.parentElement.id === "guideList"
            ) {
              if (
                translationText.trim() === "" &&
                (key === "guideStep6" || key === "guideStep7")
              ) {
                element.style.display = "none";
              } else {
                element.innerHTML = translationText;
                element.style.display = "";
              }
            } else {
              if (
                element.parentElement &&
                element.parentElement.id === "disclaimerSection" &&
                element.tagName === "P"
              ) {
                element.textContent = translationText;
              } else if (
                element.id !== "disclaimerSection" &&
                (!element.parentElement ||
                  !element.parentElement.classList.contains(
                    "info-badges-container"
                  ))
              ) {
                element.textContent = translationText;
              }
            }
          } else if (
            element.tagName === "LI" &&
            element.parentElement &&
            element.parentElement.id === "guideList" &&
            (key === "guideStep6" || key === "guideStep7")
          ) {
            element.style.display = "none";
          }
        });
      }

      function toggleLanguage() {
        currentLanguage = currentLanguage === "en" ? "km" : "en";
        bodyEl.lang = currentLanguage;
        updateUIText();
        if (!summaryCardEl.classList.contains("hidden")) {
          const summaryData = JSON.parse(
            summaryTextEl.dataset.summaryData || "{}"
          );
          if (
            summaryData.count !== undefined &&
            summaryData.reward !== undefined
          ) {
            summaryTextEl.textContent = translations[
              currentLanguage
            ].summaryClaimedText
              .replace("{count}", summaryData.count)
              .replace("{reward}", summaryData.reward.toFixed(2));
          }
        }

        if (
          volumeCalcResultsEl.style.display === "block" &&
          calculateTradesButtonEl
        ) {
          const lastCalc = JSON.parse(
            volumeCalcResultsEl.dataset.lastCalc || "{}"
          );
          if (lastCalc.targetPoints) {
            targetPointsDisplayVEl.textContent = lastCalc.targetPoints;
            standardVolumeDisplayVEl.textContent =
              lastCalc.standardTargetUSDVolume.toLocaleString(undefined, {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
              });
            
            tradesNeededResultEl.innerHTML = `<strong class="trades-needed-highlight">${lastCalc.numberOfTrades}</strong> <span class="trades-needed-highlight" data-translate="tradesUnit">${translations[currentLanguage].tradesUnit}</span>`;

            totalAchievedVolumeDisplayVEl.textContent =
              lastCalc.totalAchievedVolume.toLocaleString(undefined, {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2,
              });
            if (lastCalc.isBnbChain) {
              effectiveVolumeDisplayVEl.textContent =
                lastCalc.adjustedTargetUSDVolume.toLocaleString(undefined, {
                  minimumFractionDigits: 2,
                  maximumFractionDigits: 2,
                });
              bnbBonusResultItemEl.style.display = "flex";
            } else {
              bnbBonusResultItemEl.style.display = "none";
            }
          }
          updateUIText();
        }
      }

      function setDarkModeIcon() {
        darkModeToggle.innerHTML = isDarkMode
          ? '<i data-lucide="sun" class="lucide icon"></i>'
          : '<i data-lucide="moon" class="lucide icon"></i>';
        lucide.createIcons();
      }

      languageToggleButton.addEventListener("click", toggleLanguage);

      darkModeToggle.addEventListener("click", () => {
        isDarkMode = !isDarkMode;
        bodyEl.classList.toggle("dark-mode", isDarkMode);
        setDarkModeIcon();
      });

      simulateButtonEl.addEventListener("click", runSimulation);

      function displayError(messageKey, container = errorMessageContainerEl) {
        const message =
          translations[currentLanguage][messageKey] ||
          "An unknown error occurred.";
        container.innerHTML = `<div class="error-message-style">${message}</div>`;
      }

      function clearError(container = errorMessageContainerEl) {
        container.innerHTML = "";
      }

      function validateInputs(inputs) {
        if (inputs.fixedDailyScore < 0) return "errorNegativeScore";
        if (inputs.totalDays <= 0) return "errorTotalDays";
        if (inputs.rollingWindow <= 0) return "errorRollingWindow";
        if (inputs.rollingWindow > inputs.totalDays)
          return "errorWindowExceedsTotal";
        if (inputs.thresholdScore <= 0) return "errorThresholdScore";
        if (inputs.pointsConsumedPerClaim < 0) return "errorPointsConsumed";
        if (inputs.rewardPerClaim < 0) return "errorRewardPerClaim";
        return null;
      }

      function runSimulation() {
        clearError();
        resultsTableBodyEl.innerHTML = "";

        const summaryContent = document.getElementById("summaryContent");
        const resultsContent = document.getElementById("resultsContent");
        const summaryHeaderButton = document.querySelector(
          "#summaryCard .card-toggle-button"
        );
        const resultsHeaderButton = document.querySelector(
          "#resultsCard .card-toggle-button"
        );

        summaryCardEl.classList.add("hidden");
        if (summaryContent) summaryContent.classList.add("hidden");
        if (summaryHeaderButton) {
          summaryHeaderButton.setAttribute("aria-expanded", "false");
          const summaryIcon =
            summaryHeaderButton.querySelector("i.card-toggle-icon");
          if (summaryIcon)
            summaryIcon.setAttribute("data-lucide", "chevron-down");
        }

        resultsCardEl.classList.add("hidden");
        if (resultsContent) resultsContent.classList.add("hidden");
        if (resultsHeaderButton) {
          resultsHeaderButton.setAttribute("aria-expanded", "false");
          const resultsIcon =
            resultsHeaderButton.querySelector("i.card-toggle-icon");
          if (resultsIcon)
            resultsIcon.setAttribute("data-lucide", "chevron-down");
        }

        const inputs = {
          fixedDailyScore: parseInt(fixedDailyScoreEl.value) || 0,
          totalDays: parseInt(totalDaysEl.value) || 1,
          rollingWindow: parseInt(rollingWindowEl.value) || 1,
          thresholdScore: parseInt(thresholdScoreEl.value) || 0,
          pointsConsumedPerClaim: parseInt(pointsConsumedEl.value) || 0,
          rewardPerClaim: parseFloat(rewardPerClaimEl.value) || 0,
        };

        const validationErrorKey = validateInputs(inputs);
        if (validationErrorKey) {
          displayError(validationErrorKey);
          return;
        }

        // Store history of claims: { dayIndex: number, pointsConsumed: number }
        const claimHistory = [];
        let runningTotalReward = 0;
        let runningClaimCount = 0;
        // Create an array representing the score earned each day.
        // For this simulation, it's fixed, but could be variable in other scenarios.
        const dailyScoresEarned = Array(inputs.totalDays).fill(
          inputs.fixedDailyScore
        );

        // Loop through each day of the simulation period.
        for (let dayIndex = 0; dayIndex < inputs.totalDays; dayIndex++) {
          const currentDayNumber = dayIndex + 1;
          // Determine the start and end of the current rolling window.
          // dayIndex is 0-based, currentDayNumber is 1-based.
          const windowStartDayIndex = Math.max(
            0,
            dayIndex - inputs.rollingWindow + 1
          );
          const windowEndDayIndex = dayIndex;

          // Calculate the raw score accumulated within the current window.
          let rawScoreInWindow = 0;
          for (let i = windowStartDayIndex; i <= windowEndDayIndex; i++) {
            rawScoreInWindow += dailyScoresEarned[i];
          }

          // Calculate points consumed from past claims that are STILL RELEVANT to this window.
          // A past claim is relevant if the day it was made (pastClaim.dayIndex)
          // is within the current window's start.
          let pointsConsumedFromRelevantPastClaims = 0;
          claimHistory.forEach((pastClaim) => {
            if (pastClaim.dayIndex >= windowStartDayIndex) {
              pointsConsumedFromRelevantPastClaims += pastClaim.pointsConsumed;
            }
          });

          // This is the score to check against the threshold.
          const scoreForCheck =
            rawScoreInWindow - pointsConsumedFromRelevantPastClaims;

          let claimedToday = false;
          let rewardTodayValue = 0; // Store the reward for this specific day if a claim occurs.
          // This is the "Consumed" value to display in the table for the current day's row.
          // It represents the points subtracted BEFORE this day's claim decision.
          const consumedForTableDisplay = pointsConsumedFromRelevantPastClaims;

          // Check if a claim can be made.
          if (
            scoreForCheck >= inputs.thresholdScore &&
            inputs.pointsConsumedPerClaim >= 0
          ) {
            claimedToday = true;
            rewardTodayValue = inputs.rewardPerClaim; // Reward for this specific claim
            runningTotalReward += rewardTodayValue; // Add to cumulative reward
            runningClaimCount++;
            // Record this claim in history
            claimHistory.push({
              dayIndex: dayIndex, // Record the 0-based index of the day the claim was made
              pointsConsumed: inputs.pointsConsumedPerClaim,
            });
          }

          // Add a row to the results table.
          const tr = document.createElement("tr");
          tr.innerHTML = `
                                <td class="text-center">${currentDayNumber}</td>
                                <td class="text-center">${
                                  dailyScoresEarned[dayIndex]
                                }</td>
                                <td class="text-center">${scoreForCheck.toFixed(
                                  0
                                )}</td> 
                                <td class="text-center">${
                                  claimedToday ? "✅" : "❌"
                                }</td>
                                <td class="text-center">${consumedForTableDisplay}</td>
                                <td class="text-center">${runningTotalReward.toFixed(
                                  2
                                )}</td> 
                                <td>Day ${
                                  windowStartDayIndex + 1
                                } ~ Day ${currentDayNumber}</td>
                            `;
          resultsTableBodyEl.appendChild(tr);
        }

        // Update summary card.
        summaryTextEl.dataset.summaryData = JSON.stringify({
          count: runningClaimCount,
          reward: runningTotalReward,
        });
        summaryTextEl.textContent = translations[
          currentLanguage
        ].summaryClaimedText
          .replace("{count}", runningClaimCount)
          .replace("{reward}", runningTotalReward.toFixed(2));

        // Show summary and results cards.
        summaryCardEl.classList.remove("hidden");
        if (summaryContent) summaryContent.classList.remove("hidden");
        if (summaryHeaderButton) {
          summaryHeaderButton.setAttribute("aria-expanded", "true");
          const summaryIcon =
            summaryHeaderButton.querySelector("i.card-toggle-icon");
          if (summaryIcon)
            summaryIcon.setAttribute("data-lucide", "chevron-up");
        }

        resultsCardEl.classList.remove("hidden");
        if (resultsContent) resultsContent.classList.remove("hidden");
        if (resultsHeaderButton) {
          resultsHeaderButton.setAttribute("aria-expanded", "true");
          const resultsIcon =
            resultsHeaderButton.querySelector("i.card-toggle-icon");
          if (resultsIcon)
            resultsIcon.setAttribute("data-lucide", "chevron-up");
        }
        lucide.createIcons(); // Re-render icons if any were changed.

        if (disclaimerSectionEl) disclaimerSectionEl.classList.remove("hidden");
      }

      // Token Swap Logic
      function setupTokenSection(iconEl, placeholderEl, nameEl, token) {
        iconEl.src = token.iconSrc;
        iconEl.alt = token.alt;
        nameEl.textContent = token.name;
        placeholderEl.textContent = token.placeholderText;

        iconEl.style.display = "inline-block";
        placeholderEl.style.display = "none";

        if (!token.iconSrc.startsWith("data:image")) {
          iconEl.onerror = () => {
            iconEl.style.display = "none";
            placeholderEl.style.display = "flex";
          };
        } else {
          iconEl.onerror = null;
        }
      }

      // Volume Points Calculator Logic
      function calculateVolumeForPoints(points) {
        if (points <= 0) return 0;
        return 2 * 2 ** (points - 1);
      }

      if (calculateTradesButtonEl) {
        calculateTradesButtonEl.addEventListener("click", () => {
          clearError(volumeCalcErrorMessageContainerEl);
          volumeCalcResultsEl.style.display = "none";
          bnbBonusResultItemEl.style.display = "none";
          cexBonusResultItemEl.style.display = "none";
          document.getElementById('investmentResultItem').style.display = 'none';


          const initialInvestment = parseFloat(
            initialInvestmentVolCalcEl.value
          );
          const targetPoints = parseInt(targetVolumePointsCalcEl.value);
          const isWalletTrade = bnbChainToggleEl.checked;
          const isCexLimitTrade = cexLimitToggleEl.checked;

          if (isNaN(initialInvestment) || initialInvestment <= 0) {
            displayError(
              "errorInitialInvestment",
              volumeCalcErrorMessageContainerEl
            );
            return;
          }
          if (isNaN(targetPoints) || targetPoints <= 0) {
            displayError(
              "errorTargetVolumePoints",
              volumeCalcErrorMessageContainerEl
            );
            return;
          }

          const standardTargetUSDVolume =
            calculateVolumeForPoints(targetPoints);
          let adjustedTargetUSDVolume = standardTargetUSDVolume;
          let bonusMultiplier = 1;

          if (isCexLimitTrade) {
            bonusMultiplier = 4;
          } else if (isWalletTrade) {
            bonusMultiplier = 2;
          }

          adjustedTargetUSDVolume = standardTargetUSDVolume / bonusMultiplier;

          const numberOfTrades = Math.ceil(
            adjustedTargetUSDVolume / initialInvestment
          );
          const totalAchievedVolume = numberOfTrades * initialInvestment;

          // Store calculated values for re-translation
          volumeCalcResultsEl.dataset.lastCalc = JSON.stringify({
            targetPoints,
            standardTargetUSDVolume,
            isWalletTrade,
            isCexLimitTrade,
            adjustedTargetUSDVolume,
            initialInvestment,
            numberOfTrades,
            totalAchievedVolume,
          });

          // Update display elements with formatted numbers
          targetPointsDisplayVEl.textContent = targetPoints;
          standardVolumeDisplayVEl.textContent =
            standardTargetUSDVolume.toLocaleString(undefined, {
              minimumFractionDigits: 2,
              maximumFractionDigits: 2,
            });
          
          tradesNeededResultEl.innerHTML = `<strong class="trades-needed-highlight">${numberOfTrades}</strong> <span class="trades-needed-highlight" data-translate="tradesUnit">${translations[currentLanguage].tradesUnit}</span>`;
          
          totalAchievedVolumeDisplayVEl.textContent =
            totalAchievedVolume.toLocaleString(undefined, {
              minimumFractionDigits: 2,
              maximumFractionDigits: 2,
            });

          volumeCalcResultsEl.style.display = "block";
          updateUIText();
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        bodyEl.lang = currentLanguage;
        setDarkModeIcon();

        if (bnbChainToggleEl) {
          bnbChainToggleEl.checked = true;
        }

        // Logic to make checkboxes mutually exclusive
        bnbChainToggleEl.addEventListener('change', () => {
            if (bnbChainToggleEl.checked) {
                cexLimitToggleEl.checked = false;
            }
        });

        cexLimitToggleEl.addEventListener('change', () => {
            if (cexLimitToggleEl.checked) {
                bnbChainToggleEl.checked = false;
            }
        });


        document.querySelectorAll(".neobrutalist-card").forEach((card) => {
          const header = card.querySelector(".card-header");
          const toggleButton = header
            ? header.querySelector(".card-toggle-button")
            : null;
          const contentId = header ? header.dataset.collapsibleTarget : null;
          const cardId = card.id;

          if (header && toggleButton && contentId) {
            header.addEventListener("click", function (event) {
              if (
                event.target === toggleButton ||
                toggleButton.contains(event.target) ||
                ((event.target === header || header.contains(event.target)) &&
                  !event.target.closest(
                    "button:not(.card-toggle-button), a, input, select, textarea"
                  ))
              ) {
                toggleCardContent(toggleButton);
              }
            });

            const contentElement = document.getElementById(contentId);
            const iconElement =
              toggleButton.querySelector("i.card-toggle-icon");

            if (contentElement && iconElement) {
              let isInitiallyOpen =
                cardId === "volumeCalcCard" ||
                cardId === "alphaScoreSimulatorCard";

              if (cardId === "summaryCard" || cardId === "resultsCard") {
                if (card) card.classList.add("hidden");
                contentElement.classList.add("hidden");
                toggleButton.setAttribute("aria-expanded", "false");
                iconElement.setAttribute("data-lucide", "chevron-down");
              } else if (isInitiallyOpen) {
                contentElement.classList.remove("hidden");
                toggleButton.setAttribute("aria-expanded", "true");
                iconElement.setAttribute("data-lucide", "chevron-up");
              } else {
                contentElement.classList.add("hidden");
                toggleButton.setAttribute("aria-expanded", "false");
                iconElement.setAttribute("data-lucide", "chevron-down");
              }
            }
          }
        });

        lucide.createIcons();
        updateUIText();
        if (disclaimerSectionEl) disclaimerSectionEl.classList.remove("hidden");

        if (swapCardEl) {
          setupTokenSection(
            document.getElementById("tokenKogeIcon"),
            document.getElementById("tokenKogePlaceholder"),
            document.getElementById("tokenKogeName"),
            tokenData.koge
          );
          setupTokenSection(
            document.getElementById("tokenBrIcon"),
            document.getElementById("tokenBrPlaceholder"),
            document.getElementById("tokenBrName"),
            tokenData.br
          );
          setupTokenSection(
            document.getElementById("tokenOikIcon"),
            document.getElementById("tokenOikPlaceholder"),
            document.getElementById("tokenOikName"),
            tokenData.oik
          );
        }
      });
    </script>
  </body>
</html>
