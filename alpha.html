<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpha Score Rolling Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@400;500;600;700;800&display=swap"
      rel="stylesheet" />
    <!-- Lucid Icons (still kept for other icons like language and theme toggle) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      :root {
        /* Light Mode Palette - Inspired by neobrutalism.dev */
        --bg-light: #fffbeb; /* Pale Cream/Yellow */
        --text-light: #000000;
        --card-bg-light: #ffffff;
        --border-color: #000000; /* Universal black border */
        --shadow-color: #000000; /* Universal black shadow */

        --button-primary-bg-light: #2563eb; /* Bright Blue (e.g., Simulate button) */
        --button-primary-text-light: #ffffff;
        --button-primary-hover-bg-light: #1d4ed8;

        --button-toggle-bg-light: #ffffff;
        --button-toggle-text-light: #000000;
        --button-toggle-icon-light: #000000;

        --summary-card-bg-light: #facc15; /* Vibrant Yellow */
        --summary-card-text-light: #000000;

        --table-header-bg-light: #34d399; /* Vibrant Green */
        --table-header-text-light: #000000;
        --table-even-row-bg-light: #f3f4f6; /* Light Gray */
        --table-odd-row-bg-light: #ffffff;
        --table-data-text-light: var(--text-light);

        --error-text-light: #9f1239; /* Dark Rose text */
        --error-bg-light: #fecdd3; /* Light Rose background */

        --grid-line-color-light: rgba(0, 0, 0, 0.07);
        --marquee-bg-light: #a78bfa; /* Vibrant Purple for marquee */
        --marquee-text-light: #ffffff;

        /* Dark Mode Palette */
        --bg-dark: #111827;
        --text-dark: #f3f4f6;
        --card-bg-dark: #1f2937;

        --button-primary-bg-dark: #2563eb;
        --button-primary-text-dark: #ffffff;
        --button-primary-hover-bg-dark: #1d4ed8;

        --button-toggle-bg-dark: #1f2937;
        --button-toggle-text-dark: #f3f4f6;
        --button-toggle-icon-dark: #f3f4f6;

        --summary-card-bg-dark: #facc15;
        --summary-card-text-dark: #000000;

        --table-header-bg-dark: #34d399;
        --table-header-text-dark: #000000;
        --table-even-row-bg-dark: #374151;
        --table-odd-row-bg-dark: #1f2937;
        --table-data-text-dark: #ffffff;

        --error-text-dark: #9f1239;
        --error-bg-dark: #fecdd3;

        --grid-line-color-dark: rgba(255, 255, 255, 0.05);
        --marquee-bg-dark: #7c3aed;
        --marquee-text-dark: #ffffff;
      }

      body {
        font-family: "Poppins", "Kantumruy Pro", sans-serif;
        background-color: var(--bg-light);
        color: var(--text-light);
        transition: background-color 0.3s, color 0.3s;

        background-image: linear-gradient(
            var(--grid-line-color-light) 1px,
            transparent 1px
          ),
          linear-gradient(
            to right,
            var(--grid-line-color-light) 1px,
            transparent 1px
          );
        background-size: 40px 40px;
      }
      body.dark-mode {
        background-color: var(--bg-dark);
        color: var(--text-dark);
        background-image: linear-gradient(
            var(--grid-line-color-dark) 1px,
            transparent 1px
          ),
          linear-gradient(
            to right,
            var(--grid-line-color-dark) 1px,
            transparent 1px
          );
      }

      .neobrutalist-marquee {
        background-color: var(--marquee-bg-light);
        color: var(--marquee-text-light);
        border: 3px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 6px 6px 0px var(--shadow-color);
        padding: 0.75rem 1rem;
        margin-bottom: 1.5rem;
        font-weight: 700;
        font-size: 1rem;
        overflow: hidden;
        transition: background-color 0.3s, color 0.3s;
      }
      body.dark-mode .neobrutalist-marquee {
        background-color: var(--marquee-bg-dark);
        color: var(--marquee-text-dark);
      }
      .neobrutalist-marquee .marquee-item {
        display: inline-flex;
        align-items: center;
        margin-right: 2.5rem;
      }
      .neobrutalist-marquee .marquee-item .marquee-custom-svg {
        width: 20px;
        height: 20px;
        margin: 0 0.45rem;
      }
      .neobrutalist-marquee .marquee-item .marquee-custom-svg path {
        fill: var(--marquee-text-light);
        transition: fill 0.3s;
      }
      body.dark-mode
        .neobrutalist-marquee
        .marquee-item
        .marquee-custom-svg
        path {
        fill: var(--marquee-text-dark);
      }

      .neobrutalist-card {
        background-color: var(--card-bg-light);
        border: 3px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 6px 6px 0px var(--shadow-color);
        padding: 1.5rem;
        margin-bottom: 1rem;
        transition: background-color 0.3s;
      }
      body.dark-mode .neobrutalist-card {
        background-color: var(--card-bg-dark);
      }

      .input-label {
        display: block;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
        font-weight: 700;
        color: var(--text-light);
        transition: color 0.3s;
      }
      body.dark-mode .input-label {
        color: var(--text-dark);
      }

      .input-field {
        width: 100%;
        padding: 0.75rem;
        border: 3px solid var(--border-color);
        border-radius: 0.375rem;
        font-size: 1rem;
        background-color: var(--card-bg-light);
        font-weight: 500;
        color: var(--text-light);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
          background-color 0.3s, color 0.3s;
      }
      body.dark-mode .input-field {
        background-color: var(--card-bg-dark);
        color: var(--text-dark);
      }
      .input-field:focus {
        outline: none;
        box-shadow: 3px 3px 0px var(--shadow-color);
        transform: translate(-1px, -1px);
      }

      .toggle-button {
        background-color: var(--button-toggle-bg-light);
        color: var(--button-toggle-text-light);
        font-weight: 700;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        border: 3px solid var(--border-color);
        box-shadow: 3px 3px 0px var(--shadow-color);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
          background-color 0.3s, color 0.3s;
        cursor: pointer;
        margin-left: 0.5rem;
        font-size: 0.875rem;
        line-height: 1.5;
        min-width: auto;
        text-align: center;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
      }
      .toggle-button svg {
        width: 18px;
        height: 18px;
        stroke: var(--button-toggle-icon-light);
        transition: stroke 0.3s;
      }
      body.dark-mode .toggle-button {
        background-color: var(--button-toggle-bg-dark);
        color: var(--button-toggle-text-dark);
      }
      body.dark-mode .toggle-button svg {
        stroke: var(--button-toggle-icon-dark);
      }
      .toggle-button:hover {
        transform: translate(-1px, -1px);
        box-shadow: 4px 4px 0px var(--shadow-color);
      }
      /* Specific style for Twitter button if text is added */
      #twitterButton span {
        font-size: 0.75rem; /* Smaller font size for handle */
        margin-left: 0.25rem;
      }

      .simulate-button {
        width: 100%;
        background-color: var(--button-primary-bg-light);
        color: var(--button-primary-text-light);
        font-weight: 800;
        padding: 0.875rem 0;
        border-radius: 0.375rem;
        border: 3px solid var(--border-color);
        font-size: 1.125rem;
        box-shadow: 4px 4px 0px var(--shadow-color);
        transition: transform 0.1s ease-out, box-shadow 0.1s ease-out,
          background-color 0.3s, color 0.3s;
        cursor: pointer;
      }
      body.dark-mode .simulate-button {
        background-color: var(--button-primary-bg-dark);
        color: var(--button-primary-text-dark);
      }
      .simulate-button:hover {
        background-color: var(--button-primary-hover-bg-light);
        transform: translate(-2px, -2px);
        box-shadow: 6px 6px 0px var(--shadow-color);
      }
      body.dark-mode .simulate-button:hover {
        background-color: var(--button-primary-hover-bg-dark);
      }
      .simulate-button:active {
        transform: translate(2px, 2px);
        box-shadow: 2px 2px 0px var(--shadow-color);
      }

      .summary-card {
        background-color: var(--summary-card-bg-light);
        color: var(--summary-card-text-light);
        border: 3px solid var(--border-color);
        border-radius: 0.5rem;
        box-shadow: 6px 6px 0px var(--shadow-color);
        padding: 1.5rem;
        transition: background-color 0.3s, color 0.3s;
      }
      body.dark-mode .summary-card {
        background-color: var(--summary-card-bg-dark);
        color: var(--summary-card-text-dark);
      }
      .summary-text {
        font-size: 1.125rem;
        font-weight: 700;
        text-align: center;
      }

      .results-table {
        width: 100%;
        margin-top: 1rem;
        border-collapse: collapse;
        font-size: 0.875rem;
        border: 3px solid var(--border-color);
      }
      .results-table th,
      .results-table td {
        border: 2px solid var(--border-color);
        padding: 0.5rem;
        text-align: left;
        transition: background-color 0.3s, color 0.3s;
      }
      .results-table th {
        background-color: var(--table-header-bg-light);
        color: var(--table-header-text-light);
        font-weight: 700;
        border-bottom-width: 3px;
      }
      body.dark-mode .results-table th {
        background-color: var(--table-header-bg-dark);
        color: var(--table-header-text-dark);
      }
      .results-table td {
        color: var(--table-data-text-light);
      }
      body.dark-mode .results-table td {
        color: var(--table-data-text-dark);
      }
      .results-table td.text-center {
        text-align: center;
      }
      .results-table tr:nth-child(even) td {
        background-color: var(--table-even-row-bg-light);
      }
      body.dark-mode .results-table tr:nth-child(even) td {
        background-color: var(--table-even-row-bg-dark);
      }
      .results-table tr:nth-child(odd) td {
        background-color: var(--table-odd-row-bg-light);
      }
      body.dark-mode .results-table tr:nth-child(odd) td {
        background-color: var(--table-odd-row-bg-dark);
      }

      .error-message-style {
        color: var(--error-text-light);
        background-color: var(--error-bg-light);
        border: 3px solid var(--border-color);
        padding: 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        text-align: center;
        font-weight: 600;
        box-shadow: 4px 4px 0px var(--shadow-color);
        transition: background-color 0.3s, color 0.3s;
      }
      body.dark-mode .error-message-style {
        color: var(--error-text-dark);
        background-color: var(--error-bg-dark);
      }

      .page-title {
        font-size: 1.75rem;
        font-weight: 800;
        text-align: center;
        margin-bottom: 1.5rem;
        color: var(--text-light);
        transition: color 0.3s;
      }
      body.dark-mode .page-title {
        color: var(--text-dark);
      }
      .controls-container {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }
      #resultsCard h2 {
        color: var(--text-light);
        transition: color 0.3s;
      }
      body.dark-mode #resultsCard h2 {
        color: var(--text-dark);
      }
      /* Author credit removed from CSS as it's removed from HTML */

      @media (max-width: 640px) {
        /* sm breakpoint */
        .controls-container {
          justify-content: center;
        }
        .toggle-button {
          margin-top: 0.5rem;
        }
        .page-title {
          font-size: 1.5rem;
        }
        .results-table th,
        .results-table td {
          padding: 0.3rem;
          font-size: 0.75rem;
        }
        .neobrutalist-marquee {
          font-size: 0.875rem;
          padding: 0.5rem 0.75rem;
        }
        .neobrutalist-marquee .marquee-item .marquee-custom-svg {
          width: 16px;
          height: 16px;
        }
      }
    </style>
  </head>
  <body class="p-4 md:p-8">
    <div class="container mx-auto max-w-4xl">
      <div class="controls-container">
        <button id="languageToggleButton" class="toggle-button">
          <i data-lucide="languages" class="icon"></i>
          <span data-translate="languageToggle">English</span>
        </button>
        <!-- Twitter Button/Link -->
        <a
          href="https://x.com/drv3v"
          target="_blank"
          rel="noopener noreferrer"
          id="twitterButton"
          class="toggle-button ml-2">
          <i data-lucide="twitter" class="icon"></i>
          <span>@drv3v</span>
        </a>
        <button id="darkModeToggle" class="toggle-button ml-2">
          <!-- Icon will be set by JavaScript -->
        </button>
      </div>

      <marquee
        class="neobrutalist-marquee"
        behavior="scroll"
        direction="left"
        scrollamount="5">
        <span class="marquee-item">
          0xPRERICH
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 200 200"
            class="marquee-custom-svg">
            <path
              d="M100 5a9.5 9.5 0 0 0-9.5 9.5v50.045l-25.023-43.34A9.5 9.5 0 0 0 52.5 17.728a9.5 9.5 0 0 0-3.477 12.977l25.023 43.34-43.341-25.022a9.5 9.5 0 0 0-9.5 16.454L64.545 90.5H14.5A9.5 9.5 0 0 0 5 100a9.5 9.5 0 0 0 9.5 9.5h50.046l-43.341 25.023a9.5 9.5 0 0 0-3.477 12.977 9.5 9.5 0 0 0 12.977 3.477l43.34-25.023-25.022 43.341a9.5 9.5 0 0 0 3.477 12.977 9.5 9.5 0 0 0 12.977-3.477L90.5 135.454V185.5a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5v-50.046l25.023 43.341a9.5 9.5 0 0 0 12.977 3.477 9.5 9.5 0 0 0 3.477-12.977l-25.023-43.341 43.341 25.023a9.5 9.5 0 0 0 12.977-3.477 9.5 9.5 0 0 0-3.477-12.977L135.454 109.5H185.5a9.5 9.5 0 0 0 9.5-9.5 9.5 9.5 0 0 0-9.5-9.5h-50.046l43.341-25.023a9.5 9.5 0 0 0 3.477-12.977c-2.623-4.544-8.433-6.1-12.977-3.477l-43.341 25.023 25.023-43.341a9.5 9.5 0 0 0-3.477-12.977 9.5 9.5 0 0 0-12.977 3.477L109.5 64.545V14.5A9.5 9.5 0 0 0 100 5"
              clip-rule="evenodd"
              fill-rule="evenodd"></path>
          </svg>
        </span>
        <span class="marquee-item">
          HASHNODE
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 200 200"
            class="marquee-custom-svg">
            <path
              d="M100 5a9.5 9.5 0 0 0-9.5 9.5v50.045l-25.023-43.34A9.5 9.5 0 0 0 52.5 17.728a9.5 9.5 0 0 0-3.477 12.977l25.023 43.34-43.341-25.022a9.5 9.5 0 0 0-9.5 16.454L64.545 90.5H14.5A9.5 9.5 0 0 0 5 100a9.5 9.5 0 0 0 9.5 9.5h50.046l-43.341 25.023a9.5 9.5 0 0 0-3.477 12.977 9.5 9.5 0 0 0 12.977 3.477l43.34-25.023-25.022 43.341a9.5 9.5 0 0 0 3.477 12.977 9.5 9.5 0 0 0 12.977-3.477L90.5 135.454V185.5a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5v-50.046l25.023 43.341a9.5 9.5 0 0 0 12.977 3.477 9.5 9.5 0 0 0 3.477-12.977l-25.023-43.341 43.341 25.023a9.5 9.5 0 0 0 12.977-3.477 9.5 9.5 0 0 0-3.477-12.977L135.454 109.5H185.5a9.5 9.5 0 0 0 9.5-9.5 9.5 9.5 0 0 0-9.5-9.5h-50.046l43.341-25.023a9.5 9.5 0 0 0 3.477-12.977c-2.623-4.544-8.433-6.1-12.977-3.477l-43.341 25.023 25.023-43.341a9.5 9.5 0 0 0-3.477-12.977 9.5 9.5 0 0 0-12.977 3.477L109.5 64.545V14.5A9.5 9.5 0 0 0 100 5"
              clip-rule="evenodd"
              fill-rule="evenodd"></path>
          </svg>
        </span>
        <span class="marquee-item">
          BINANCE ALPHA
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 200 200"
            class="marquee-custom-svg">
            <path
              d="M100 5a9.5 9.5 0 0 0-9.5 9.5v50.045l-25.023-43.34A9.5 9.5 0 0 0 52.5 17.728a9.5 9.5 0 0 0-3.477 12.977l25.023 43.34-43.341-25.022a9.5 9.5 0 0 0-9.5 16.454L64.545 90.5H14.5A9.5 9.5 0 0 0 5 100a9.5 9.5 0 0 0 9.5 9.5h50.046l-43.341 25.023a9.5 9.5 0 0 0-3.477 12.977 9.5 9.5 0 0 0 12.977 3.477l43.34-25.023-25.022 43.341a9.5 9.5 0 0 0 3.477 12.977 9.5 9.5 0 0 0 12.977-3.477L90.5 135.454V185.5a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5v-50.046l25.023 43.341a9.5 9.5 0 0 0 12.977 3.477 9.5 9.5 0 0 0 3.477-12.977l-25.023-43.341 43.341 25.023a9.5 9.5 0 0 0 12.977-3.477 9.5 9.5 0 0 0-3.477-12.977L135.454 109.5H185.5a9.5 9.5 0 0 0 9.5-9.5 9.5 9.5 0 0 0-9.5-9.5h-50.046l43.341-25.023a9.5 9.5 0 0 0 3.477-12.977c-2.623-4.544-8.433-6.1-12.977-3.477l-43.341 25.023 25.023-43.341a9.5 9.5 0 0 0-3.477-12.977 9.5 9.5 0 0 0-12.977 3.477L109.5 64.545V14.5A9.5 9.5 0 0 0 100 5"
              clip-rule="evenodd"
              fill-rule="evenodd"></path>
          </svg>
        </span>
        <!-- Repeat for continuous effect -->
        <span class="marquee-item">
          0xPRERICH
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 200 200"
            class="marquee-custom-svg">
            <path
              d="M100 5a9.5 9.5 0 0 0-9.5 9.5v50.045l-25.023-43.34A9.5 9.5 0 0 0 52.5 17.728a9.5 9.5 0 0 0-3.477 12.977l25.023 43.34-43.341-25.022a9.5 9.5 0 0 0-9.5 16.454L64.545 90.5H14.5A9.5 9.5 0 0 0 5 100a9.5 9.5 0 0 0 9.5 9.5h50.046l-43.341 25.023a9.5 9.5 0 0 0-3.477 12.977 9.5 9.5 0 0 0 12.977 3.477l43.34-25.023-25.022 43.341a9.5 9.5 0 0 0 3.477 12.977 9.5 9.5 0 0 0 12.977-3.477L90.5 135.454V185.5a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5v-50.046l25.023 43.341a9.5 9.5 0 0 0 12.977 3.477 9.5 9.5 0 0 0 3.477-12.977l-25.023-43.341 43.341 25.023a9.5 9.5 0 0 0 12.977-3.477 9.5 9.5 0 0 0-3.477-12.977L135.454 109.5H185.5a9.5 9.5 0 0 0 9.5-9.5 9.5 9.5 0 0 0-9.5-9.5h-50.046l43.341-25.023a9.5 9.5 0 0 0 3.477-12.977c-2.623-4.544-8.433-6.1-12.977-3.477l-43.341 25.023 25.023-43.341a9.5 9.5 0 0 0-3.477-12.977 9.5 9.5 0 0 0-12.977 3.477L109.5 64.545V14.5A9.5 9.5 0 0 0 100 5"
              clip-rule="evenodd"
              fill-rule="evenodd"></path>
          </svg>
        </span>
        <span class="marquee-item">
          HASHNODE
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 200 200"
            class="marquee-custom-svg">
            <path
              d="M100 5a9.5 9.5 0 0 0-9.5 9.5v50.045l-25.023-43.34A9.5 9.5 0 0 0 52.5 17.728a9.5 9.5 0 0 0-3.477 12.977l25.023 43.34-43.341-25.022a9.5 9.5 0 0 0-9.5 16.454L64.545 90.5H14.5A9.5 9.5 0 0 0 5 100a9.5 9.5 0 0 0 9.5 9.5h50.046l-43.341 25.023a9.5 9.5 0 0 0-3.477 12.977 9.5 9.5 0 0 0 12.977 3.477l43.34-25.023-25.022 43.341a9.5 9.5 0 0 0 3.477 12.977 9.5 9.5 0 0 0 12.977-3.477L90.5 135.454V185.5a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5v-50.046l25.023 43.341a9.5 9.5 0 0 0 12.977 3.477 9.5 9.5 0 0 0 3.477-12.977l-25.023-43.341 43.341 25.023a9.5 9.5 0 0 0 12.977-3.477 9.5 9.5 0 0 0-3.477-12.977L135.454 109.5H185.5a9.5 9.5 0 0 0 9.5-9.5 9.5 9.5 0 0 0-9.5-9.5h-50.046l43.341-25.023a9.5 9.5 0 0 0 3.477-12.977c-2.623-4.544-8.433-6.1-12.977-3.477l-43.341 25.023 25.023-43.341a9.5 9.5 0 0 0-3.477-12.977 9.5 9.5 0 0 0-12.977 3.477L109.5 64.545V14.5A9.5 9.5 0 0 0 100 5"
              clip-rule="evenodd"
              fill-rule="evenodd"></path>
          </svg>
        </span>
        <span class="marquee-item">
          BINANCE ALPHA
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 200 200"
            class="marquee-custom-svg">
            <path
              d="M100 5a9.5 9.5 0 0 0-9.5 9.5v50.045l-25.023-43.34A9.5 9.5 0 0 0 52.5 17.728a9.5 9.5 0 0 0-3.477 12.977l25.023 43.34-43.341-25.022a9.5 9.5 0 0 0-9.5 16.454L64.545 90.5H14.5A9.5 9.5 0 0 0 5 100a9.5 9.5 0 0 0 9.5 9.5h50.046l-43.341 25.023a9.5 9.5 0 0 0-3.477 12.977 9.5 9.5 0 0 0 12.977 3.477l43.34-25.023-25.022 43.341a9.5 9.5 0 0 0 3.477 12.977 9.5 9.5 0 0 0 12.977-3.477L90.5 135.454V185.5a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5v-50.046l25.023 43.341a9.5 9.5 0 0 0 12.977 3.477 9.5 9.5 0 0 0 3.477-12.977l-25.023-43.341 43.341 25.023a9.5 9.5 0 0 0 12.977-3.477 9.5 9.5 0 0 0-3.477-12.977L135.454 109.5H185.5a9.5 9.5 0 0 0 9.5-9.5 9.5 9.5 0 0 0-9.5-9.5h-50.046l43.341-25.023a9.5 9.5 0 0 0 3.477-12.977c-2.623-4.544-8.433-6.1-12.977-3.477l-43.341 25.023 25.023-43.341a9.5 9.5 0 0 0-3.477-12.977 9.5 9.5 0 0 0-12.977 3.477L109.5 64.545V14.5A9.5 9.5 0 0 0 100 5"
              clip-rule="evenodd"
              fill-rule="evenodd"></path>
          </svg>
        </span>
      </marquee>

      <div class="neobrutalist-card">
        <h1 class="page-title" data-translate="pageTitle">
          Alpha Score Rolling Simulator
        </h1>

        <div id="errorMessageContainer" class="mb-4">
          <!-- Error message will be injected here by JavaScript -->
        </div>

        <div
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-8 mb-8">
          <div>
            <label
              for="fixedDailyScore"
              class="input-label"
              data-translate="fixedDailyScoreLabel"
              >Fixed Daily Score</label
            >
            <input
              type="number"
              id="fixedDailyScore"
              class="input-field"
              value="18" />
          </div>
          <div>
            <label
              for="totalDays"
              class="input-label"
              data-translate="totalDaysLabel"
              >Total Days</label
            >
            <input
              type="number"
              id="totalDays"
              class="input-field"
              value="30"
              min="1" />
          </div>
          <div>
            <label
              for="rollingWindow"
              class="input-label"
              data-translate="rollingWindowLabel"
              >Rolling Window (days)</label
            >
            <input
              type="number"
              id="rollingWindow"
              class="input-field"
              value="15"
              min="1" />
          </div>
          <div>
            <label
              for="thresholdScore"
              class="input-label"
              data-translate="thresholdScoreLabel"
              >Threshold Score</label
            >
            <input
              type="number"
              id="thresholdScore"
              class="input-field"
              value="210" />
          </div>
          <div>
            <label
              for="pointsConsumed"
              class="input-label"
              data-translate="pointsConsumedLabel"
              >Points Consumed per Claim</label
            >
            <input
              type="number"
              id="pointsConsumed"
              class="input-field"
              value="15" />
          </div>
          <div>
            <label
              for="rewardPerClaim"
              class="input-label"
              data-translate="rewardPerClaimLabel"
              >Reward per Claim (U)</label
            >
            <input
              type="number"
              id="rewardPerClaim"
              class="input-field"
              value="90" />
          </div>
        </div>

        <button
          id="simulateButton"
          class="simulate-button"
          data-translate="simulateButton">
          Simulate
        </button>
      </div>

      <div id="summaryCard" class="summary-card neobrutalist-card hidden">
        <p id="summaryText" class="summary-text"></p>
      </div>

      <div id="resultsCard" class="neobrutalist-card hidden">
        <h2
          class="text-xl font-semibold text-center mb-4"
          data-translate="resultsTitle">
          Simulation Details
        </h2>

        <div class="overflow-x-auto">
          <table class="results-table">
            <thead>
              <tr>
                <th data-translate="tableDay">Day</th>
                <th data-translate="tableDailyScore">Daily Score</th>
                <th data-translate="tableTotalInWindow">
                  Total in Window (for Claim)
                </th>
                <th data-translate="tableClaimed">Claimed?</th>
                <th data-translate="tablePtsConsumed">
                  Pts Consumed (Before Today)
                </th>
                <th data-translate="tableRewardToday">Reward Today (U)</th>
                <th data-translate="tableWindowRange">Window Range</th>
              </tr>
            </thead>
            <tbody id="resultsTableBody">
              <!-- Rows will be injected here by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Author Credit Section Removed -->
    </div>

    <script>
      lucide.createIcons(); // Initialize Lucid Icons

      const translations = {
        en: {
          languageToggle: "English",
          pageTitle: "Alpha Score Rolling Simulator",
          fixedDailyScoreLabel: "Fixed Daily Score",
          totalDaysLabel: "Total Days",
          rollingWindowLabel: "Rolling Window (days)",
          thresholdScoreLabel: "Threshold Score",
          pointsConsumedLabel: "Points Consumed per Claim",
          rewardPerClaimLabel: "Reward per Claim (USD)",
          simulateButton: "Simulate",
          resultsTitle: "Simulation Details",
          tableDay: "Day",
          tableDailyScore: "Daily Score",
          tableTotalInWindow: "Total in Window (for Claim)",
          tableClaimed: "Claimed?",
          tablePtsConsumed: "Pts Consumed (Before Today)",
          tableRewardToday: "Reward Today (USD)",
          tableWindowRange: "Window Range",
          errorNegativeScore: "Fixed Daily Score cannot be negative.",
          errorTotalDays: "Total Days must be greater than 0.",
          errorRollingWindow: "Rolling Window must be greater than 0.",
          errorWindowExceedsTotal: "Rolling Window cannot exceed Total Days.",
          errorThresholdScore: "Threshold Score must be greater than 0.",
          errorPointsConsumed: "Points Consumed per Claim cannot be negative.",
          errorRewardPerClaim: "Reward per Claim cannot be negative.",
          summaryClaimedText:
            "✅ Claimed {count} times, total reward {reward} USD",
        },
        km: {
          languageToggle: "ភាសាខ្មែរ",
          pageTitle: "កម្មវិធីគណនាពិន្ទុអាល់ហ្វា",
          fixedDailyScoreLabel: "ពិន្ទុថេរប្រចាំថ្ងៃ",
          totalDaysLabel: "ចំនួនថ្ងៃសរុប",
          rollingWindowLabel: "វិលត្រលប់ (ថ្ងៃ)",
          thresholdScoreLabel: "គោលដៅពិន្ទុ",
          pointsConsumedLabel: "ពិន្ទុប្រើប្រាស់ក្នុងការទទួលយកម្តង",
          rewardPerClaimLabel: "រង្វាន់ក្នុងមួយការទទួលយកម្តង (USD)",
          simulateButton: "គណនា",
          resultsTitle: "ព័ត៌មានលម្អិតនៃការគណនា",
          tableDay: "ថ្ងៃទី",
          tableDailyScore: "ពិន្ទុប្រចាំថ្ងៃ",
          tableTotalInWindow: "ពិន្ទុសរុប",
          tableClaimed: "ប្រហែលអាចទទួលបាន?",
          tablePtsConsumed: "ពិន្ទុប្រើប្រាស់ (មុនថ្ងៃនេះ)",
          tableRewardToday: "រង្វាន់ថ្ងៃនេះ (USD)",
          tableWindowRange: "រយៈពេល",
          errorNegativeScore: "ពិន្ទុថេរប្រចាំថ្ងៃមិនអាចអវិជ្ជមានបានទេ។",
          errorTotalDays: "ចំនួនថ្ងៃសរុបត្រូវតែធំជាង 0។",
          errorRollingWindow: "វិលត្រលប់ (ថ្ងៃ)ត្រូវតែធំជាង 0។",
          errorWindowExceedsTotal:
            "វិលត្រលប់ (ថ្ងៃ)មិនអាចលើសពីจำนวนថ្ងៃសរុបបានទេ។",
          errorThresholdScore: "គោលដៅពិន្ទុត្រូវតែធំជាង 0។",
          errorPointsConsumed:
            "ពិន្ទុប្រើប្រាស់ក្នុងការទទួលយកម្តងមិនអាចអវិជ្ជមានបានទេ។",
          errorRewardPerClaim:
            "រង្វាន់ក្នុងមួយការទទួលយកម្តង (USD)មិនអាចអវិជ្ជមានបានទេ។",
          summaryClaimedText:
            "✅ ប្រហែលអាចទទួលបាន {count} ដង, រង្វាន់សរុប {reward} USD",
        },
      };

      let currentLanguage = "en";
      let isDarkMode = false;

      // DOM Elements
      const fixedDailyScoreEl = document.getElementById("fixedDailyScore");
      const totalDaysEl = document.getElementById("totalDays");
      const rollingWindowEl = document.getElementById("rollingWindow");
      const thresholdScoreEl = document.getElementById("thresholdScore");
      const pointsConsumedEl = document.getElementById("pointsConsumed");
      const rewardPerClaimEl = document.getElementById("rewardPerClaim");
      const simulateButtonEl = document.getElementById("simulateButton");

      const summaryCardEl = document.getElementById("summaryCard");
      const summaryTextEl = document.getElementById("summaryText");

      const resultsCardEl = document.getElementById("resultsCard");
      const resultsTableBodyEl = document.getElementById("resultsTableBody");
      const errorMessageContainerEl = document.getElementById(
        "errorMessageContainer"
      );

      const languageToggleButton = document.getElementById(
        "languageToggleButton"
      );
      const darkModeToggle = document.getElementById("darkModeToggle");
      const twitterButton = document.getElementById("twitterButton"); // Get twitter button
      const bodyEl = document.body;

      function updateUIText() {
        document.querySelectorAll("[data-translate]").forEach((element) => {
          const key = element.getAttribute("data-translate");
          if (
            translations[currentLanguage] &&
            translations[currentLanguage][key]
          ) {
            if (element.id === "languageToggleButton") {
              const textSpan = element.querySelector("span");
              if (textSpan) {
                textSpan.textContent =
                  translations[currentLanguage]["languageToggle"];
              }
            } else {
              element.textContent = translations[currentLanguage][key];
            }
          }
        });
      }

      function toggleLanguage() {
        currentLanguage = currentLanguage === "en" ? "km" : "en";
        bodyEl.lang = currentLanguage;
        updateUIText();
        if (!summaryCardEl.classList.contains("hidden")) {
          const summaryData = JSON.parse(
            summaryTextEl.dataset.summaryData || "{}"
          );
          if (
            summaryData.count !== undefined &&
            summaryData.reward !== undefined
          ) {
            summaryTextEl.textContent = translations[
              currentLanguage
            ].summaryClaimedText
              .replace("{count}", summaryData.count)
              .replace("{reward}", summaryData.reward.toFixed(2));
          }
        }
      }

      function setDarkModeIcon() {
        darkModeToggle.innerHTML = isDarkMode
          ? '<i data-lucide="sun" class="icon"></i>'
          : '<i data-lucide="moon" class="icon"></i>';
        lucide.createIcons();
      }

      languageToggleButton.addEventListener("click", toggleLanguage);

      darkModeToggle.addEventListener("click", () => {
        isDarkMode = !isDarkMode;
        bodyEl.classList.toggle("dark-mode", isDarkMode);
        setDarkModeIcon();
      });

      simulateButtonEl.addEventListener("click", runSimulation);

      function displayError(messageKey) {
        const message =
          translations[currentLanguage][messageKey] ||
          "An unknown error occurred.";
        errorMessageContainerEl.innerHTML = `<div class="error-message-style">${message}</div>`;
      }

      function clearError() {
        errorMessageContainerEl.innerHTML = "";
      }

      function validateInputs(inputs) {
        if (inputs.fixedDailyScore < 0) return "errorNegativeScore";
        if (inputs.totalDays <= 0) return "errorTotalDays";
        if (inputs.rollingWindow <= 0) return "errorRollingWindow";
        if (inputs.rollingWindow > inputs.totalDays)
          return "errorWindowExceedsTotal";
        if (inputs.thresholdScore <= 0) return "errorThresholdScore";
        if (inputs.pointsConsumed < 0) return "errorPointsConsumed";
        if (inputs.rewardPerClaim < 0) return "errorRewardPerClaim";
        return null;
      }

      function runSimulation() {
        clearError();
        resultsTableBodyEl.innerHTML = "";
        summaryCardEl.classList.add("hidden");
        resultsCardEl.classList.add("hidden");

        const inputs = {
          fixedDailyScore: parseInt(fixedDailyScoreEl.value) || 0,
          totalDays: parseInt(totalDaysEl.value) || 1,
          rollingWindow: parseInt(rollingWindowEl.value) || 1,
          thresholdScore: parseInt(thresholdScoreEl.value) || 0,
          pointsConsumedPerClaim: parseInt(pointsConsumedEl.value) || 0,
          rewardPerClaim: parseFloat(rewardPerClaimEl.value) || 0,
        };

        const validationErrorKey = validateInputs(inputs);
        if (validationErrorKey) {
          displayError(validationErrorKey);
          return;
        }

        let totalPointsConsumedByPreviousDays = 0;
        let runningTotalReward = 0;
        let runningClaimCount = 0;
        const dailyScores = Array(inputs.totalDays).fill(
          inputs.fixedDailyScore
        );

        for (let dayIndex = 0; dayIndex < inputs.totalDays; dayIndex++) {
          const currentDayNumber = dayIndex + 1;
          const windowStartDayIndex = Math.max(
            0,
            dayIndex - inputs.rollingWindow + 1
          );
          const windowEndDayIndex = dayIndex;

          let rawScoreInWindow = 0;
          for (let i = windowStartDayIndex; i <= windowEndDayIndex; i++) {
            rawScoreInWindow += dailyScores[i];
          }

          const scoreForCheck =
            rawScoreInWindow - totalPointsConsumedByPreviousDays;

          let claimedToday = false;
          let rewardToday = 0;
          const consumedForTableDisplay = totalPointsConsumedByPreviousDays;

          if (
            scoreForCheck >= inputs.thresholdScore &&
            inputs.pointsConsumedPerClaim >= 0
          ) {
            claimedToday = true;
            rewardToday = inputs.rewardPerClaim;
            runningTotalReward += rewardToday;
            runningClaimCount++;
            totalPointsConsumedByPreviousDays += inputs.pointsConsumedPerClaim;
          }

          const tr = document.createElement("tr");
          tr.innerHTML = `
                    <td class="text-center">${currentDayNumber}</td>
                    <td class="text-center">${inputs.fixedDailyScore}</td>
                    <td class="text-center">${scoreForCheck.toFixed(2)}</td>
                    <td class="text-center">${claimedToday ? "✅" : "❌"}</td>
                    <td class="text-center">${consumedForTableDisplay}</td>
                    <td class="text-center">${rewardToday.toFixed(2)}</td>
                    <td>Day ${
                      windowStartDayIndex + 1
                    } ~ Day ${currentDayNumber}</td>
                `;
          resultsTableBodyEl.appendChild(tr);
        }

        summaryTextEl.dataset.summaryData = JSON.stringify({
          count: runningClaimCount,
          reward: runningTotalReward,
        });
        summaryTextEl.textContent = translations[
          currentLanguage
        ].summaryClaimedText
          .replace("{count}", runningClaimCount)
          .replace("{reward}", runningTotalReward.toFixed(2));

        summaryCardEl.classList.remove("hidden");
        resultsCardEl.classList.remove("hidden");
      }

      document.addEventListener("DOMContentLoaded", () => {
        bodyEl.lang = currentLanguage;
        updateUIText();
        setDarkModeIcon();
        lucide.createIcons();
      });
    </script>
  </body>
</html>
